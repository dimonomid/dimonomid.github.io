<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>TNeoKernel: core/tn_sys.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-7163754-5', 'auto');
  ga('send', 'pageview');
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TNeoKernel
   &#160;<span id="projectnumber">v1.03</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4270bfced15e0e73154b13468c7c9ad9.html">core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tn_sys.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Kernel system routines: system start, tick processing, time slice managing. </p>

<p>Definition in file <a class="el" href="tn__sys_8h_source.html">tn_sys.h</a>.</p>
</div>
<p><a href="tn__sys_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad61af0f0e9ab96bdf1ac1bf1e03e3c75"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#ad61af0f0e9ab96bdf1ac1bf1e03e3c75">TN_STACK_ARR_DEF</a>(name, size)</td></tr>
<tr class="memdesc:ad61af0f0e9ab96bdf1ac1bf1e03e3c75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convenience macro for the definition of stack array.  <a href="#ad61af0f0e9ab96bdf1ac1bf1e03e3c75">More...</a><br /></td></tr>
<tr class="separator:ad61af0f0e9ab96bdf1ac1bf1e03e3c75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab389cb36d15c2390d7868b10391c9b49"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab389cb36d15c2390d7868b10391c9b49"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#ab389cb36d15c2390d7868b10391c9b49">TN_NO_TIME_SLICE</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ab389cb36d15c2390d7868b10391c9b49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value to pass to <code><a class="el" href="tn__sys_8h.html#a05fc370b6faa604fd8ff9411361c4cd0" title="Set time slice ticks value for specified priority (see Round-robin scheduling). ">tn_sys_tslice_set()</a></code> to turn round-robin off. <br /></td></tr>
<tr class="separator:ab389cb36d15c2390d7868b10391c9b49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a546b128561cc3bf46d0423bad1f5c8c7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a546b128561cc3bf46d0423bad1f5c8c7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#a546b128561cc3bf46d0423bad1f5c8c7">TN_MAX_TIME_SLICE</a>&#160;&#160;&#160;0xFFFE</td></tr>
<tr class="memdesc:a546b128561cc3bf46d0423bad1f5c8c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Max value of time slice. <br /></td></tr>
<tr class="separator:a546b128561cc3bf46d0423bad1f5c8c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a94f785ff88dfca8746f34de59784883d"><td class="memItemLeft" align="right" valign="top">typedef void(&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#a94f785ff88dfca8746f34de59784883d">TN_CBUserTaskCreate</a> )(void)</td></tr>
<tr class="memdesc:a94f785ff88dfca8746f34de59784883d"><td class="mdescLeft">&#160;</td><td class="mdescRight">User-provided callback function that is called directly from <code><a class="el" href="tn__sys_8h.html#a62ab25d9d8ca01c02d368968f19e49bf" title="Initial TNeoKernel system start function, never returns. ">tn_sys_start()</a></code> as a part of system startup routine; it should merely create at least one (and typically just one) user's task, which should perform all the rest application initialization.  <a href="#a94f785ff88dfca8746f34de59784883d">More...</a><br /></td></tr>
<tr class="separator:a94f785ff88dfca8746f34de59784883d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac53892c962d429fadf7cf508024eec66"><td class="memItemLeft" align="right" valign="top">typedef void(&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#ac53892c962d429fadf7cf508024eec66">TN_CBIdle</a> )(void)</td></tr>
<tr class="memdesc:ac53892c962d429fadf7cf508024eec66"><td class="mdescLeft">&#160;</td><td class="mdescRight">User-provided callback function that is called repeatedly from the idle task loop.  <a href="#ac53892c962d429fadf7cf508024eec66">More...</a><br /></td></tr>
<tr class="separator:ac53892c962d429fadf7cf508024eec66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8fd9ea5f9f265e638b56917bf1a5767"><td class="memItemLeft" align="right" valign="top">typedef void(&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#ae8fd9ea5f9f265e638b56917bf1a5767">TN_CBDeadlock</a> )(<a class="el" href="tn__common_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> active, struct <a class="el" href="structTN__Mutex.html">TN_Mutex</a> *mutex, struct <a class="el" href="structTN__Task.html">TN_Task</a> *task)</td></tr>
<tr class="memdesc:ae8fd9ea5f9f265e638b56917bf1a5767"><td class="mdescLeft">&#160;</td><td class="mdescRight">User-provided callback function that is called whenever deadlock becomes active or inactive.  <a href="#ae8fd9ea5f9f265e638b56917bf1a5767">More...</a><br /></td></tr>
<tr class="separator:ae8fd9ea5f9f265e638b56917bf1a5767"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ace9542d94b996fb2070cd57d6658a2d8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#ace9542d94b996fb2070cd57d6658a2d8">TN_StateFlag</a> { <a class="el" href="tn__sys_8h.html#ace9542d94b996fb2070cd57d6658a2d8aa5085b1c78bc7e75aeac04a76cab6a52">TN_STATE_FLAG__SYS_RUNNING</a> = (1 &lt;&lt; 0), 
<a class="el" href="tn__sys_8h.html#ace9542d94b996fb2070cd57d6658a2d8a188c405a2cde555e7aaaeaa1189a4580">TN_STATE_FLAG__DEADLOCK</a> = (1 &lt;&lt; 1)
 }</td></tr>
<tr class="memdesc:ace9542d94b996fb2070cd57d6658a2d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">System state flags.  <a href="tn__sys_8h.html#ace9542d94b996fb2070cd57d6658a2d8">More...</a><br /></td></tr>
<tr class="separator:ace9542d94b996fb2070cd57d6658a2d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54b0c697dfdb3b59e7bcc6eb7badda51"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51">TN_Context</a> { <a class="el" href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51ac6015804609fb2bb71335015c51c40a3">TN_CONTEXT_NONE</a>, 
<a class="el" href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51ab78bafeb369a85700f793a7375e38ec6">TN_CONTEXT_TASK</a>, 
<a class="el" href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51a4b0defef531f47e8cf5dc274355b6626">TN_CONTEXT_ISR</a>
 }</td></tr>
<tr class="memdesc:a54b0c697dfdb3b59e7bcc6eb7badda51"><td class="mdescLeft">&#160;</td><td class="mdescRight">System context.  <a href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51">More...</a><br /></td></tr>
<tr class="separator:a54b0c697dfdb3b59e7bcc6eb7badda51"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a62ab25d9d8ca01c02d368968f19e49bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#a62ab25d9d8ca01c02d368968f19e49bf">tn_sys_start</a> (<a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a> *idle_task_stack, unsigned int idle_task_stack_size, <a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a> *int_stack, unsigned int int_stack_size, <a class="el" href="tn__sys_8h.html#a94f785ff88dfca8746f34de59784883d">TN_CBUserTaskCreate</a> *cb_user_task_create, <a class="el" href="tn__sys_8h.html#ac53892c962d429fadf7cf508024eec66">TN_CBIdle</a> *cb_idle)</td></tr>
<tr class="memdesc:a62ab25d9d8ca01c02d368968f19e49bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initial TNeoKernel system start function, never returns.  <a href="#a62ab25d9d8ca01c02d368968f19e49bf">More...</a><br /></td></tr>
<tr class="separator:a62ab25d9d8ca01c02d368968f19e49bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a944d96c7a5d442d271115b6cb22a085b"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#a944d96c7a5d442d271115b6cb22a085b">tn_tick_int_processing</a> (void)</td></tr>
<tr class="memdesc:a944d96c7a5d442d271115b6cb22a085b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process system tick; should be called periodically, typically from some kind of timer ISR.  <a href="#a944d96c7a5d442d271115b6cb22a085b">More...</a><br /></td></tr>
<tr class="separator:a944d96c7a5d442d271115b6cb22a085b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05fc370b6faa604fd8ff9411361c4cd0"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#a05fc370b6faa604fd8ff9411361c4cd0">tn_sys_tslice_set</a> (int priority, int ticks)</td></tr>
<tr class="memdesc:a05fc370b6faa604fd8ff9411361c4cd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set time slice ticks value for specified priority (see <a class="el" href="quick_guide.html#round_robin">Round-robin scheduling</a>).  <a href="#a05fc370b6faa604fd8ff9411361c4cd0">More...</a><br /></td></tr>
<tr class="separator:a05fc370b6faa604fd8ff9411361c4cd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d2170986218026c105ed4656f5cd0eb"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#a8d2170986218026c105ed4656f5cd0eb">tn_sys_time_get</a> (void)</td></tr>
<tr class="memdesc:a8d2170986218026c105ed4656f5cd0eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get current system ticks count.  <a href="#a8d2170986218026c105ed4656f5cd0eb">More...</a><br /></td></tr>
<tr class="separator:a8d2170986218026c105ed4656f5cd0eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa4a5c2feb4a0db5993b81dde496edc3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#aaa4a5c2feb4a0db5993b81dde496edc3">tn_callback_deadlock_set</a> (<a class="el" href="tn__sys_8h.html#ae8fd9ea5f9f265e638b56917bf1a5767">TN_CBDeadlock</a> *cb)</td></tr>
<tr class="memdesc:aaa4a5c2feb4a0db5993b81dde496edc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set callback function that should be called whenever deadlock occurs or becomes inactive (say, if one of tasks involved in the deadlock was released from wait because of timeout)  <a href="#aaa4a5c2feb4a0db5993b81dde496edc3">More...</a><br /></td></tr>
<tr class="separator:aaa4a5c2feb4a0db5993b81dde496edc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a202fb30400101599c1e39ba4e58d2fd5"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="tn__sys_8h.html#ace9542d94b996fb2070cd57d6658a2d8">TN_StateFlag</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#a202fb30400101599c1e39ba4e58d2fd5">tn_sys_state_flags_get</a> (void)</td></tr>
<tr class="memdesc:a202fb30400101599c1e39ba4e58d2fd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns current system state flags.  <a href="#a202fb30400101599c1e39ba4e58d2fd5">More...</a><br /></td></tr>
<tr class="separator:a202fb30400101599c1e39ba4e58d2fd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3233931746c9d8b84ebd34a2a3a468a"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51">TN_Context</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#ac3233931746c9d8b84ebd34a2a3a468a">tn_sys_context_get</a> (void)</td></tr>
<tr class="memdesc:ac3233931746c9d8b84ebd34a2a3a468a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns system context: task or ISR.  <a href="#ac3233931746c9d8b84ebd34a2a3a468a">More...</a><br /></td></tr>
<tr class="separator:ac3233931746c9d8b84ebd34a2a3a468a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad87f45a4a385f68f9492ba48365c00e0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="tn__common_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#ad87f45a4a385f68f9492ba48365c00e0">tn_is_task_context</a> (void)</td></tr>
<tr class="memdesc:ad87f45a4a385f68f9492ba48365c00e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether current system context is <code><a class="el" href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51ab78bafeb369a85700f793a7375e38ec6" title="Task context. ">TN_CONTEXT_TASK</a></code>  <a href="#ad87f45a4a385f68f9492ba48365c00e0">More...</a><br /></td></tr>
<tr class="separator:ad87f45a4a385f68f9492ba48365c00e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a797d5a13800d4da9581abaa13e506854"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="tn__common_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#a797d5a13800d4da9581abaa13e506854">tn_is_isr_context</a> (void)</td></tr>
<tr class="memdesc:a797d5a13800d4da9581abaa13e506854"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether current system context is <code><a class="el" href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51a4b0defef531f47e8cf5dc274355b6626" title="ISR context. ">TN_CONTEXT_ISR</a></code>  <a href="#a797d5a13800d4da9581abaa13e506854">More...</a><br /></td></tr>
<tr class="separator:a797d5a13800d4da9581abaa13e506854"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ca353dcf362a5aa8d2e5a3960e51410"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structTN__Task.html">TN_Task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#a2ca353dcf362a5aa8d2e5a3960e51410">tn_cur_task_get</a> (void)</td></tr>
<tr class="memdesc:a2ca353dcf362a5aa8d2e5a3960e51410"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns pointer to the currently running task.  <a href="#a2ca353dcf362a5aa8d2e5a3960e51410">More...</a><br /></td></tr>
<tr class="separator:a2ca353dcf362a5aa8d2e5a3960e51410"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa3c83dce52b17c9ee07b34af0fcebab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="tn__common_8h.html#a82f7de9034cbbb373c4dbcff45942343">TN_TaskBody</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sys_8h.html#afa3c83dce52b17c9ee07b34af0fcebab">tn_cur_task_body_get</a> (void)</td></tr>
<tr class="memdesc:afa3c83dce52b17c9ee07b34af0fcebab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns pointer to the body function of the currently running task.  <a href="#afa3c83dce52b17c9ee07b34af0fcebab">More...</a><br /></td></tr>
<tr class="separator:afa3c83dce52b17c9ee07b34af0fcebab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad61af0f0e9ab96bdf1ac1bf1e03e3c75"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TN_STACK_ARR_DEF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">size&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_ARCH_STK_ATTR_BEFORE                   \</a></div>
<div class="line"><a class="code" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">   TN_UWord</a> name[ (size) ]                   \</div>
<div class="line">   <a class="code" href="tn__arch__example_8h.html#ab082613959b539182b8b47bc87d18d6a">TN_ARCH_STK_ATTR_AFTER</a></div>
<div class="ttc" id="tn__arch__example_8h_html_ab082613959b539182b8b47bc87d18d6a"><div class="ttname"><a href="tn__arch__example_8h.html#ab082613959b539182b8b47bc87d18d6a">TN_ARCH_STK_ATTR_AFTER</a></div><div class="ttdeci">#define TN_ARCH_STK_ATTR_AFTER</div><div class="ttdoc">Compiler-specific attribute that should be placed after declaration of array used for stack...</div><div class="ttdef"><b>Definition:</b> <a href="tn__arch__example_8h_source.html#l00087">tn_arch_example.h:87</a></div></div>
<div class="ttc" id="tn__arch__example_8h_html_ab80cba0fe9ffcd9011d53dfeb9e39bf4"><div class="ttname"><a href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a></div><div class="ttdeci">unsigned int TN_UWord</div><div class="ttdoc">Unsigned integer type whose size is equal to the size of CPU register. </div><div class="ttdef"><b>Definition:</b> <a href="tn__arch__example_8h_source.html#l00104">tn_arch_example.h:104</a></div></div>
</div><!-- fragment -->
<p>Convenience macro for the definition of stack array. </p>
<p>See <code><a class="el" href="tn__tasks_8h.html#a548d5adda09d1b4e393b5df0e9e1a7a5" title="Construct task and probably start it (depends on options, see below). ">tn_task_create()</a></code> for the usage example.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>C variable name of the array </td></tr>
    <tr><td class="paramname">size</td><td>size of the stack array in words (<code><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4" title="Unsigned integer type whose size is equal to the size of CPU register. ">TN_UWord</a></code>), not in bytes. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tn__sys_8h_source.html#l00085">85</a> of file <a class="el" href="tn__sys_8h_source.html">tn_sys.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a94f785ff88dfca8746f34de59784883d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void( TN_CBUserTaskCreate)(void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>User-provided callback function that is called directly from <code><a class="el" href="tn__sys_8h.html#a62ab25d9d8ca01c02d368968f19e49bf" title="Initial TNeoKernel system start function, never returns. ">tn_sys_start()</a></code> as a part of system startup routine; it should merely create at least one (and typically just one) user's task, which should perform all the rest application initialization. </p>
<p>When <code><a class="el" href="tn__sys_8h.html#a94f785ff88dfca8746f34de59784883d" title="User-provided callback function that is called directly from tn_sys_start() as a part of system start...">TN_CBUserTaskCreate()</a></code> returned, the kernel performs first context switch to the task with highest priority. If there are several tasks with highest priority, context is switched to the first created one.</p>
<p>Refer to the section <a class="el" href="quick_guide.html#starting_the_kernel">Starting the kernel</a> for details about system startup process on the whole.</p>
<p><b>Note:</b> Although you're able to create more than one task here, it's usually not so good idea, because many things typically should be done at startup before tasks can go on with their job: we need to initialize various on-board peripherals (displays, flash memory chips, or whatever) as well as initialize software modules used by application. So, if many tasks are created here, you have to provide some synchronization object so that tasks will wait until all the initialization is done.</p>
<p>It's usually easier to maintain if we create just one task here, which firstly performs all the necessary initialization, <b>then</b> creates the rest of your tasks, and eventually gets to its primary job (the job for which task was created at all). For the usage example, refer to the page <a class="el" href="quick_guide.html#starting_the_kernel">Starting the kernel</a>.</p>
<dl class="section attention"><dt>Attention</dt><dd><ul>
<li>The only system service is allowed to call in this function is <code><a class="el" href="tn__tasks_8h.html#a548d5adda09d1b4e393b5df0e9e1a7a5" title="Construct task and probably start it (depends on options, see below). ">tn_task_create()</a></code>.</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><code><a class="el" href="tn__sys_8h.html#a62ab25d9d8ca01c02d368968f19e49bf" title="Initial TNeoKernel system start function, never returns. ">tn_sys_start()</a></code> </dd></dl>

<p>Definition at line <a class="el" href="tn__sys_8h_source.html#l00162">162</a> of file <a class="el" href="tn__sys_8h_source.html">tn_sys.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac53892c962d429fadf7cf508024eec66"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void( TN_CBIdle)(void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>User-provided callback function that is called repeatedly from the idle task loop. </p>
<p>Make sure that idle task has enough stack space to call this function.</p>
<dl class="section attention"><dt>Attention</dt><dd><ul>
<li>It is illegal to sleep here, because idle task (from which this function is called) should always be runnable, by design. If <code><a class="el" href="tn__cfg__default_8h.html#a9d2b6d902efdbc56094bb913413aa69c" title="Allows additional internal self-checking, useful to catch internal TNeoKernel bugs as well as illegal...">TN_DEBUG</a></code> option is set, then sleeping in idle task is checked, so if you try to sleep here, <code><a class="el" href="tn__arch__example_8h.html#a782f83184c608149ce6e02a461927bab" title="Used by the kernel as a signal that something really bad happened. ">_TN_FATAL_ERROR()</a></code> macro will be called.</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><code><a class="el" href="tn__sys_8h.html#a62ab25d9d8ca01c02d368968f19e49bf" title="Initial TNeoKernel system start function, never returns. ">tn_sys_start()</a></code> </dd></dl>

<p>Definition at line <a class="el" href="tn__sys_8h_source.html#l00177">177</a> of file <a class="el" href="tn__sys_8h_source.html">tn_sys.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae8fd9ea5f9f265e638b56917bf1a5767"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void( TN_CBDeadlock)(<a class="el" href="tn__common_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> active, struct <a class="el" href="structTN__Mutex.html">TN_Mutex</a> *mutex, struct <a class="el" href="structTN__Task.html">TN_Task</a> *task)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>User-provided callback function that is called whenever deadlock becomes active or inactive. </p>
<p>Note: this feature works if only <code><a class="el" href="tn__cfg__default_8h.html#a6ed3ec7b0d4338e7f60dde86b7ea5fa4" title="Whether RTOS should detect deadlocks and notify user about them via callback. ">TN_MUTEX_DEADLOCK_DETECT</a></code> is non-zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">active</td><td>if <code>TRUE</code>, deadlock becomes active, otherwise it becomes inactive (say, if task stopped waiting for mutex because of timeout) </td></tr>
    <tr><td class="paramname">mutex</td><td>mutex that is involved in deadlock. You may find out other mutexes involved by means of <code>mutex-&gt;deadlock_list</code>. </td></tr>
    <tr><td class="paramname">task</td><td>task that is involved in deadlock. You may find out other tasks involved by means of <code>task-&gt;deadlock_list</code>. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tn__sys_8h_source.html#l00192">192</a> of file <a class="el" href="tn__sys_8h_source.html">tn_sys.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ace9542d94b996fb2070cd57d6658a2d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="tn__sys_8h.html#ace9542d94b996fb2070cd57d6658a2d8">TN_StateFlag</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>System state flags. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ace9542d94b996fb2070cd57d6658a2d8aa5085b1c78bc7e75aeac04a76cab6a52"></a>TN_STATE_FLAG__SYS_RUNNING&#160;</td><td class="fielddoc">
<p>system is running </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ace9542d94b996fb2070cd57d6658a2d8a188c405a2cde555e7aaaeaa1189a4580"></a>TN_STATE_FLAG__DEADLOCK&#160;</td><td class="fielddoc">
<p>deadlock is active Note: this feature works if only <code><a class="el" href="tn__cfg__default_8h.html#a6ed3ec7b0d4338e7f60dde86b7ea5fa4" title="Whether RTOS should detect deadlocks and notify user about them via callback. ">TN_MUTEX_DEADLOCK_DETECT</a></code> is non-zero. </p>
<dl class="section see"><dt>See also</dt><dd><code><a class="el" href="tn__cfg__default_8h.html#a6ed3ec7b0d4338e7f60dde86b7ea5fa4" title="Whether RTOS should detect deadlocks and notify user about them via callback. ">TN_MUTEX_DEADLOCK_DETECT</a></code> </dd></dl>
</td></tr>
</table>

<p>Definition at line <a class="el" href="tn__sys_8h_source.html#l00100">100</a> of file <a class="el" href="tn__sys_8h_source.html">tn_sys.h</a>.</p>

</div>
</div>
<a class="anchor" id="a54b0c697dfdb3b59e7bcc6eb7badda51"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51">TN_Context</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>System context. </p>
<dl class="section see"><dt>See also</dt><dd><code><a class="el" href="tn__sys_8h.html#ac3233931746c9d8b84ebd34a2a3a468a" title="Returns system context: task or ISR. ">tn_sys_context_get()</a></code> </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a54b0c697dfdb3b59e7bcc6eb7badda51ac6015804609fb2bb71335015c51c40a3"></a>TN_CONTEXT_NONE&#160;</td><td class="fielddoc">
<p>None: this code is possible if only system is not running (flag (<code><a class="el" href="tn__sys_8h.html#ace9542d94b996fb2070cd57d6658a2d8aa5085b1c78bc7e75aeac04a76cab6a52" title="system is running ">TN_STATE_FLAG__SYS_RUNNING</a></code> is not set in the <code>tn_sys_state</code>)) </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a54b0c697dfdb3b59e7bcc6eb7badda51ab78bafeb369a85700f793a7375e38ec6"></a>TN_CONTEXT_TASK&#160;</td><td class="fielddoc">
<p>Task context. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a54b0c697dfdb3b59e7bcc6eb7badda51a4b0defef531f47e8cf5dc274355b6626"></a>TN_CONTEXT_ISR&#160;</td><td class="fielddoc">
<p>ISR context. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="tn__sys_8h_source.html#l00116">116</a> of file <a class="el" href="tn__sys_8h_source.html">tn_sys.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a62ab25d9d8ca01c02d368968f19e49bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tn_sys_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a> *&#160;</td>
          <td class="paramname"><em>idle_task_stack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>idle_task_stack_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a> *&#160;</td>
          <td class="paramname"><em>int_stack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>int_stack_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tn__sys_8h.html#a94f785ff88dfca8746f34de59784883d">TN_CBUserTaskCreate</a> *&#160;</td>
          <td class="paramname"><em>cb_user_task_create</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tn__sys_8h.html#ac53892c962d429fadf7cf508024eec66">TN_CBIdle</a> *&#160;</td>
          <td class="paramname"><em>cb_idle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initial TNeoKernel system start function, never returns. </p>
<p>Typically called from main().</p>
<p>Refer to the <a class="el" href="quick_guide.html#starting_the_kernel">Starting the kernel</a> section for the usage example and additional comments.</p>
<p><small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">idle_task_stack</td><td>Pointer to array for idle task stack. User must either use the macro <code><a class="el" href="tn__sys_8h.html#ad61af0f0e9ab96bdf1ac1bf1e03e3c75" title="Convenience macro for the definition of stack array. ">TN_STACK_ARR_DEF()</a></code> for the definition of stack array, or allocate it manually as an array of <code><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4" title="Unsigned integer type whose size is equal to the size of CPU register. ">TN_UWord</a></code> with <code><a class="el" href="tn__arch__example_8h.html#ae245dddb19cd7c12b7038a62d576fafa" title="Compiler-specific attribute that should be placed before declaration of array used for stack...">TN_ARCH_STK_ATTR_BEFORE</a></code> and <code><a class="el" href="tn__arch__example_8h.html#ab082613959b539182b8b47bc87d18d6a" title="Compiler-specific attribute that should be placed after declaration of array used for stack...">TN_ARCH_STK_ATTR_AFTER</a></code> macros. </td></tr>
    <tr><td class="paramname">idle_task_stack_size</td><td>Size of idle task stack, in words (<code><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4" title="Unsigned integer type whose size is equal to the size of CPU register. ">TN_UWord</a></code>) </td></tr>
    <tr><td class="paramname">int_stack</td><td>Pointer to array for interrupt stack. User must either use the macro <code><a class="el" href="tn__sys_8h.html#ad61af0f0e9ab96bdf1ac1bf1e03e3c75" title="Convenience macro for the definition of stack array. ">TN_STACK_ARR_DEF()</a></code> for the definition of stack array, or allocate it manually as an array of <code><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4" title="Unsigned integer type whose size is equal to the size of CPU register. ">TN_UWord</a></code> with <code><a class="el" href="tn__arch__example_8h.html#ae245dddb19cd7c12b7038a62d576fafa" title="Compiler-specific attribute that should be placed before declaration of array used for stack...">TN_ARCH_STK_ATTR_BEFORE</a></code> and <code><a class="el" href="tn__arch__example_8h.html#ab082613959b539182b8b47bc87d18d6a" title="Compiler-specific attribute that should be placed after declaration of array used for stack...">TN_ARCH_STK_ATTR_AFTER</a></code> macros. </td></tr>
    <tr><td class="paramname">int_stack_size</td><td>Size of interrupt stack, in words (<code><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4" title="Unsigned integer type whose size is equal to the size of CPU register. ">TN_UWord</a></code>) </td></tr>
    <tr><td class="paramname">cb_user_task_create</td><td>Callback function that should create initial user's task, see <code><a class="el" href="tn__sys_8h.html#a94f785ff88dfca8746f34de59784883d" title="User-provided callback function that is called directly from tn_sys_start() as a part of system start...">TN_CBUserTaskCreate</a></code> for details. </td></tr>
    <tr><td class="paramname">cb_idle</td><td>Callback function repeatedly called from idle task, see <code><a class="el" href="tn__sys_8h.html#ac53892c962d429fadf7cf508024eec66" title="User-provided callback function that is called repeatedly from the idle task loop. ">TN_CBIdle</a></code> for details. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a944d96c7a5d442d271115b6cb22a085b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a> tn_tick_int_processing </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process system tick; should be called periodically, typically from some kind of timer ISR. </p>
<p>The period of this timer is determined by user (typically 1 ms, but user is free to set different value)</p>
<p>Among other things, expired <a class="el" href="tn__timer_8h.html">timers</a> are fired from this function.</p>
<p>For further information, refer to <a class="el" href="quick_guide.html">Quick guide</a>.</p>
<div class="image">
<img src="attr_call_int.png" alt="attr_call_int.png"/>
</div>
  <div class="image">
<img src="attr_call_ct_sw.png" alt="attr_call_ct_sw.png"/>
</div>
  <small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small></p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876afb291924237186f5765865256c75e639" title="Successful operation. ">TN_RC_OK</a></code> on success;</li>
<li><code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876a886368391507ae426bfdedc38284db9d" title="Wrong context error: returned if function is called from non-acceptable context. ">TN_RC_WCONTEXT</a></code> if called from wrong context. </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a05fc370b6faa604fd8ff9411361c4cd0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a> tn_sys_tslice_set </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ticks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set time slice ticks value for specified priority (see <a class="el" href="quick_guide.html#round_robin">Round-robin scheduling</a>). </p>
<div class="image">
<img src="attr_call_task.png" alt="attr_call_task.png"/>
</div>
  <small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">priority</td><td>Priority of tasks for which time slice value should be set </td></tr>
    <tr><td class="paramname">ticks</td><td>Time slice value, in ticks. Set to <code><a class="el" href="tn__sys_8h.html#ab389cb36d15c2390d7868b10391c9b49" title="Value to pass to tn_sys_tslice_set() to turn round-robin off. ">TN_NO_TIME_SLICE</a></code> for no round-robin scheduling for given priority (it's default value). Value can't be higher than <code><a class="el" href="tn__sys_8h.html#a546b128561cc3bf46d0423bad1f5c8c7" title="Max value of time slice. ">TN_MAX_TIME_SLICE</a></code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876afb291924237186f5765865256c75e639" title="Successful operation. ">TN_RC_OK</a></code> on success;</li>
<li><code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876a886368391507ae426bfdedc38284db9d" title="Wrong context error: returned if function is called from non-acceptable context. ">TN_RC_WCONTEXT</a></code> if called from wrong context;</li>
<li><code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876a89909a6426b477a38496a1be67590e68" title="This code is returned by most of the kernel functions when wrong params were given to function...">TN_RC_WPARAM</a></code> if given <code>priority</code> or <code>ticks</code> are invalid. </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a8d2170986218026c105ed4656f5cd0eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int tn_sys_time_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get current system ticks count. </p>
<div class="image">
<img src="attr_call_task.png" alt="attr_call_task.png"/>
</div>
  <div class="image">
<img src="attr_call_int.png" alt="attr_call_int.png"/>
</div>
  <small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small></p>
<dl class="section return"><dt>Returns</dt><dd>Current system ticks count. </dd></dl>

</div>
</div>
<a class="anchor" id="aaa4a5c2feb4a0db5993b81dde496edc3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tn_callback_deadlock_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tn__sys_8h.html#ae8fd9ea5f9f265e638b56917bf1a5767">TN_CBDeadlock</a> *&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set callback function that should be called whenever deadlock occurs or becomes inactive (say, if one of tasks involved in the deadlock was released from wait because of timeout) </p>
<p><small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small></p>
<p><b>Note:</b> this function should be called from <code>main()</code>, before <code><a class="el" href="tn__sys_8h.html#a62ab25d9d8ca01c02d368968f19e49bf" title="Initial TNeoKernel system start function, never returns. ">tn_sys_start()</a></code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>Pointer to user-provided callback function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><code><a class="el" href="tn__cfg__default_8h.html#a6ed3ec7b0d4338e7f60dde86b7ea5fa4" title="Whether RTOS should detect deadlocks and notify user about them via callback. ">TN_MUTEX_DEADLOCK_DETECT</a></code> </dd>
<dd>
<code><a class="el" href="tn__sys_8h.html#ae8fd9ea5f9f265e638b56917bf1a5767" title="User-provided callback function that is called whenever deadlock becomes active or inactive...">TN_CBDeadlock</a></code> for callback function prototype </dd></dl>

</div>
</div>
<a class="anchor" id="a202fb30400101599c1e39ba4e58d2fd5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="tn__sys_8h.html#ace9542d94b996fb2070cd57d6658a2d8">TN_StateFlag</a> tn_sys_state_flags_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns current system state flags. </p>
<div class="image">
<img src="attr_call_task.png" alt="attr_call_task.png"/>
</div>
  <div class="image">
<img src="attr_call_int.png" alt="attr_call_int.png"/>
</div>
  <small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small> </p>

</div>
</div>
<a class="anchor" id="ac3233931746c9d8b84ebd34a2a3a468a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51">TN_Context</a> tn_sys_context_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns system context: task or ISR. </p>
<div class="image">
<img src="attr_call_task.png" alt="attr_call_task.png"/>
</div>
  <div class="image">
<img src="attr_call_int.png" alt="attr_call_int.png"/>
</div>
   <small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small></p>
<dl class="section see"><dt>See also</dt><dd><code>enum <a class="el" href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51" title="System context. ">TN_Context</a></code> </dd></dl>

</div>
</div>
<a class="anchor" id="ad87f45a4a385f68f9492ba48365c00e0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="tn__common_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> tn_is_task_context </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns whether current system context is <code><a class="el" href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51ab78bafeb369a85700f793a7375e38ec6" title="Task context. ">TN_CONTEXT_TASK</a></code> </p>
<div class="image">
<img src="attr_call_task.png" alt="attr_call_task.png"/>
</div>
  <div class="image">
<img src="attr_call_int.png" alt="attr_call_int.png"/>
</div>
   <small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small></p>
<dl class="section return"><dt>Returns</dt><dd><code>TRUE</code> if current system context is <code><a class="el" href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51ab78bafeb369a85700f793a7375e38ec6" title="Task context. ">TN_CONTEXT_TASK</a></code>, <code>FALSE</code> otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><code><a class="el" href="tn__sys_8h.html#ac3233931746c9d8b84ebd34a2a3a468a" title="Returns system context: task or ISR. ">tn_sys_context_get()</a></code> </dd>
<dd>
<code>enum <a class="el" href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51" title="System context. ">TN_Context</a></code> </dd></dl>

<p>Definition at line <a class="el" href="tn__sys_8h_source.html#l00371">371</a> of file <a class="el" href="tn__sys_8h_source.html">tn_sys.h</a>.</p>

</div>
</div>
<a class="anchor" id="a797d5a13800d4da9581abaa13e506854"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="tn__common_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> tn_is_isr_context </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns whether current system context is <code><a class="el" href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51a4b0defef531f47e8cf5dc274355b6626" title="ISR context. ">TN_CONTEXT_ISR</a></code> </p>
<div class="image">
<img src="attr_call_task.png" alt="attr_call_task.png"/>
</div>
  <div class="image">
<img src="attr_call_int.png" alt="attr_call_int.png"/>
</div>
   <small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small></p>
<dl class="section return"><dt>Returns</dt><dd><code>TRUE</code> if current system context is <code><a class="el" href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51a4b0defef531f47e8cf5dc274355b6626" title="ISR context. ">TN_CONTEXT_ISR</a></code>, <code>FALSE</code> otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><code><a class="el" href="tn__sys_8h.html#ac3233931746c9d8b84ebd34a2a3a468a" title="Returns system context: task or ISR. ">tn_sys_context_get()</a></code> </dd>
<dd>
<code>enum <a class="el" href="tn__sys_8h.html#a54b0c697dfdb3b59e7bcc6eb7badda51" title="System context. ">TN_Context</a></code> </dd></dl>

<p>Definition at line <a class="el" href="tn__sys_8h_source.html#l00390">390</a> of file <a class="el" href="tn__sys_8h_source.html">tn_sys.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2ca353dcf362a5aa8d2e5a3960e51410"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structTN__Task.html">TN_Task</a>* tn_cur_task_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns pointer to the currently running task. </p>
<div class="image">
<img src="attr_call_task.png" alt="attr_call_task.png"/>
</div>
  <div class="image">
<img src="attr_call_int.png" alt="attr_call_int.png"/>
</div>
  <small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small> </p>

</div>
</div>
<a class="anchor" id="afa3c83dce52b17c9ee07b34af0fcebab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="tn__common_8h.html#a82f7de9034cbbb373c4dbcff45942343">TN_TaskBody</a>* tn_cur_task_body_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns pointer to the body function of the currently running task. </p>
<div class="image">
<img src="attr_call_task.png" alt="attr_call_task.png"/>
</div>
  <div class="image">
<img src="attr_call_int.png" alt="attr_call_int.png"/>
</div>
  <small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small> </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 20 2014 18:23:46 for TNeoKernel by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
