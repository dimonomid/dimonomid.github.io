\hypertarget{tn__cfg__default_8h}{\section{tn\+\_\+cfg\+\_\+default.\+h File Reference}
\label{tn__cfg__default_8h}\index{tn\+\_\+cfg\+\_\+default.\+h@{tn\+\_\+cfg\+\_\+default.\+h}}
}


\subsection{Detailed Description}
T\+Neo\+Kernel default configuration file, to be copied as {\ttfamily tn\+\_\+cfg.\+h}. 

This project is intended to be built as a library, separately from main project (although nothing prevents you from bundling things together, if you want to).

There are various options available which affects A\+P\+I and behavior of the kernel. But these options are specific for particular project, and aren't related to the kernel itself, so we need to keep them separately.

To this end, file {\ttfamily \hyperlink{tn_8h}{tn.\+h}} (the main kernel header file) includes {\ttfamily tn\+\_\+cfg.\+h}, which isn't included in the repository (even more, it is added to {\ttfamily .hgignore} list actually). Instead, default configuration file {\ttfamily \hyperlink{tn__cfg__default_8h}{tn\+\_\+cfg\+\_\+default.\+h}} is provided, and when you just cloned the repository, you might want to copy it as {\ttfamily tn\+\_\+cfg.\+h}. Or even better, if your filesystem supports symbolic links, copy it somewhere to your main project's directory (so that you can add it to your V\+C\+S there), and create symlink to it named {\ttfamily tn\+\_\+cfg.\+h} in the T\+Neo\+Kernel source directory, like this\+: \begin{DoxyVerb}$ cd /path/to/tneokernel/src
$ cp ./tn_cfg_default.h /path/to/main/project/lib_cfg/tn_cfg.h
$ ln -s /path/to/main/project/lib_cfg/tn_cfg.h ./tn_cfg.h
\end{DoxyVerb}


Default configuration file contains detailed comments, so you can read them and configure behavior as you like. 

Definition in file \hyperlink{tn__cfg__default_8h_source}{tn\+\_\+cfg\+\_\+default.\+h}.

\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{tn__cfg__default_8h_aad74a059c61567c68a1e9067ab47a256}{T\+N\+\_\+\+P\+R\+I\+O\+R\+I\+T\+I\+E\+S\+\_\+\+C\+N\+T}~\hyperlink{tn__arch__example_8h_a9809516063a01ca2c2f5f009294839d3}{T\+N\+\_\+\+P\+R\+I\+O\+R\+I\+T\+I\+E\+S\+\_\+\+M\+A\+X\+\_\+\+C\+N\+T}
\begin{DoxyCompactList}\small\item\em Number of priorities that can be used by application, plus one for idle task (which has the lowest priority). \end{DoxyCompactList}\item 
\#define \hyperlink{tn__cfg__default_8h_a1f197294df3276fec431930545acafd5}{T\+N\+\_\+\+C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+A\+M}~1
\begin{DoxyCompactList}\small\item\em Enables additional param checking for most of the system functions. \end{DoxyCompactList}\item 
\#define \hyperlink{tn__cfg__default_8h_a9d2b6d902efdbc56094bb913413aa69c}{T\+N\+\_\+\+D\+E\+B\+U\+G}~0
\begin{DoxyCompactList}\small\item\em Allows additional internal self-\/checking, useful to catch internal T\+Neo\+Kernel bugs as well as illegal kernel usage (e.\+g. \end{DoxyCompactList}\item 
\#define \hyperlink{tn__cfg__default_8h_ae9854c723c6a823c9126aa8390977d39}{T\+N\+\_\+\+O\+L\+D\+\_\+\+T\+N\+K\+E\+R\+N\+E\+L\+\_\+\+N\+A\+M\+E\+S}~1
\begin{DoxyCompactList}\small\item\em Whether old T\+N\+Kernel names (definitions, functions, etc) should be available. \end{DoxyCompactList}\item 
\hypertarget{tn__cfg__default_8h_a7ce674edab5345c4b8d2ec251eea18eb}{\#define \hyperlink{tn__cfg__default_8h_a7ce674edab5345c4b8d2ec251eea18eb}{T\+N\+\_\+\+U\+S\+E\+\_\+\+M\+U\+T\+E\+X\+E\+S}~1}\label{tn__cfg__default_8h_a7ce674edab5345c4b8d2ec251eea18eb}

\begin{DoxyCompactList}\small\item\em Whether mutexes A\+P\+I should be available. \end{DoxyCompactList}\item 
\hypertarget{tn__cfg__default_8h_a2557da78508c4241aceee92475df3581}{\#define \hyperlink{tn__cfg__default_8h_a2557da78508c4241aceee92475df3581}{T\+N\+\_\+\+M\+U\+T\+E\+X\+\_\+\+R\+E\+C}~1}\label{tn__cfg__default_8h_a2557da78508c4241aceee92475df3581}

\begin{DoxyCompactList}\small\item\em Whether mutexes should allow recursive locking/unlocking. \end{DoxyCompactList}\item 
\#define \hyperlink{tn__cfg__default_8h_a6ed3ec7b0d4338e7f60dde86b7ea5fa4}{T\+N\+\_\+\+M\+U\+T\+E\+X\+\_\+\+D\+E\+A\+D\+L\+O\+C\+K\+\_\+\+D\+E\+T\+E\+C\+T}~1
\begin{DoxyCompactList}\small\item\em Whether R\+T\+O\+S should detect deadlocks and notify user about them via callback. \end{DoxyCompactList}\item 
\#define \hyperlink{tn__cfg__default_8h_afef2a6ec1baa81edaa979024af0c924a}{T\+N\+\_\+\+T\+I\+C\+K\+\_\+\+L\+I\+S\+T\+S\+\_\+\+C\+N\+T}~8
\begin{DoxyCompactList}\small\item\em Number of \char`\"{}tick\char`\"{} lists of timers, must be a power or two; minimum value\+: {\ttfamily 2}; typical values\+: {\ttfamily 4}, {\ttfamily 8} or {\ttfamily 16}. \end{DoxyCompactList}\item 
\#define \hyperlink{tn__cfg__default_8h_a2a1148efc6a74131cc83ee50cbc386cd}{T\+N\+\_\+\+A\+P\+I\+\_\+\+M\+A\+K\+E\+\_\+\+A\+L\+I\+G\+\_\+\+A\+R\+G}~\hyperlink{tn__common_8h_a4972bf0cbc72e51a7463cf7d786d2b64}{T\+N\+\_\+\+A\+P\+I\+\_\+\+M\+A\+K\+E\+\_\+\+A\+L\+I\+G\+\_\+\+A\+R\+G\+\_\+\+\_\+\+S\+I\+Z\+E}
\begin{DoxyCompactList}\small\item\em A\+P\+I option for {\ttfamily \hyperlink{tn__oldsymbols_8h_aa42d2e6b5b7ff37bd485803fa2cb70a8}{M\+A\+K\+E\+\_\+\+A\+L\+I\+G()}} macro. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{tn__cfg__default_8h_aad74a059c61567c68a1e9067ab47a256}{\index{tn\+\_\+cfg\+\_\+default.\+h@{tn\+\_\+cfg\+\_\+default.\+h}!T\+N\+\_\+\+P\+R\+I\+O\+R\+I\+T\+I\+E\+S\+\_\+\+C\+N\+T@{T\+N\+\_\+\+P\+R\+I\+O\+R\+I\+T\+I\+E\+S\+\_\+\+C\+N\+T}}
\index{T\+N\+\_\+\+P\+R\+I\+O\+R\+I\+T\+I\+E\+S\+\_\+\+C\+N\+T@{T\+N\+\_\+\+P\+R\+I\+O\+R\+I\+T\+I\+E\+S\+\_\+\+C\+N\+T}!tn\+\_\+cfg\+\_\+default.\+h@{tn\+\_\+cfg\+\_\+default.\+h}}
\subsubsection[{T\+N\+\_\+\+P\+R\+I\+O\+R\+I\+T\+I\+E\+S\+\_\+\+C\+N\+T}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+N\+\_\+\+P\+R\+I\+O\+R\+I\+T\+I\+E\+S\+\_\+\+C\+N\+T~{\bf T\+N\+\_\+\+P\+R\+I\+O\+R\+I\+T\+I\+E\+S\+\_\+\+M\+A\+X\+\_\+\+C\+N\+T}}}\label{tn__cfg__default_8h_aad74a059c61567c68a1e9067ab47a256}


Number of priorities that can be used by application, plus one for idle task (which has the lowest priority). 

This value can't be higher than architecture-\/dependent value {\ttfamily \hyperlink{tn__arch__example_8h_a9809516063a01ca2c2f5f009294839d3}{T\+N\+\_\+\+P\+R\+I\+O\+R\+I\+T\+I\+E\+S\+\_\+\+M\+A\+X\+\_\+\+C\+N\+T}}, which typically equals to width of {\ttfamily int} type. So, for 32-\/bit systems, max number of priorities is 32.

But usually, application needs much less\+: I can imagine {\bfseries at most} 4-\/5 different priorities, plus one for the idle task.

Do note also that each possible priority level takes R\+A\+M\+: two pointers for linked list and one {\ttfamily short} for time slice value, so on 32-\/bit system it takes 10 bytes. So, with default value of 32 priorities available, it takes 320 bytes. If you set it, say, to 5, you save {\ttfamily 270} bytes, which might be notable.

Default\+: {\ttfamily \hyperlink{tn__arch__example_8h_a9809516063a01ca2c2f5f009294839d3}{T\+N\+\_\+\+P\+R\+I\+O\+R\+I\+T\+I\+E\+S\+\_\+\+M\+A\+X\+\_\+\+C\+N\+T}}. 

Definition at line 94 of file tn\+\_\+cfg\+\_\+default.\+h.

\hypertarget{tn__cfg__default_8h_a1f197294df3276fec431930545acafd5}{\index{tn\+\_\+cfg\+\_\+default.\+h@{tn\+\_\+cfg\+\_\+default.\+h}!T\+N\+\_\+\+C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+A\+M@{T\+N\+\_\+\+C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+A\+M}}
\index{T\+N\+\_\+\+C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+A\+M@{T\+N\+\_\+\+C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+A\+M}!tn\+\_\+cfg\+\_\+default.\+h@{tn\+\_\+cfg\+\_\+default.\+h}}
\subsubsection[{T\+N\+\_\+\+C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+A\+M}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+N\+\_\+\+C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+A\+M~1}}\label{tn__cfg__default_8h_a1f197294df3276fec431930545acafd5}


Enables additional param checking for most of the system functions. 

It's surely useful for debug, but probably better to remove in release. If it is set, most of the system functions are able to return two additional codes\+:


\begin{DoxyItemize}
\item {\ttfamily \hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876a89909a6426b477a38496a1be67590e68}{T\+N\+\_\+\+R\+C\+\_\+\+W\+P\+A\+R\+A\+M}} if wrong params were given;
\item {\ttfamily \hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876a2a2df8fecee990d279889924926bf101}{T\+N\+\_\+\+R\+C\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+O\+B\+J}} if given pointer doesn't point to a valid object. Object validity is checked by means of the special I\+D field of type {\ttfamily enum \hyperlink{tn__common_8h_ae779dd1f6735f6e139fb70acd004d976}{T\+N\+\_\+\+Obj\+Id}}.
\end{DoxyItemize}

\begin{DoxySeeAlso}{See also}
{\ttfamily enum \hyperlink{tn__common_8h_ae779dd1f6735f6e139fb70acd004d976}{T\+N\+\_\+\+Obj\+Id}} 
\end{DoxySeeAlso}


Definition at line 111 of file tn\+\_\+cfg\+\_\+default.\+h.

\hypertarget{tn__cfg__default_8h_a9d2b6d902efdbc56094bb913413aa69c}{\index{tn\+\_\+cfg\+\_\+default.\+h@{tn\+\_\+cfg\+\_\+default.\+h}!T\+N\+\_\+\+D\+E\+B\+U\+G@{T\+N\+\_\+\+D\+E\+B\+U\+G}}
\index{T\+N\+\_\+\+D\+E\+B\+U\+G@{T\+N\+\_\+\+D\+E\+B\+U\+G}!tn\+\_\+cfg\+\_\+default.\+h@{tn\+\_\+cfg\+\_\+default.\+h}}
\subsubsection[{T\+N\+\_\+\+D\+E\+B\+U\+G}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+N\+\_\+\+D\+E\+B\+U\+G~0}}\label{tn__cfg__default_8h_a9d2b6d902efdbc56094bb913413aa69c}


Allows additional internal self-\/checking, useful to catch internal T\+Neo\+Kernel bugs as well as illegal kernel usage (e.\+g. 

sleeping in the idle task callback). Produces a couple of extra instructions which usually just causes debugger to stop if something goes wrong. 

Definition at line 121 of file tn\+\_\+cfg\+\_\+default.\+h.

\hypertarget{tn__cfg__default_8h_ae9854c723c6a823c9126aa8390977d39}{\index{tn\+\_\+cfg\+\_\+default.\+h@{tn\+\_\+cfg\+\_\+default.\+h}!T\+N\+\_\+\+O\+L\+D\+\_\+\+T\+N\+K\+E\+R\+N\+E\+L\+\_\+\+N\+A\+M\+E\+S@{T\+N\+\_\+\+O\+L\+D\+\_\+\+T\+N\+K\+E\+R\+N\+E\+L\+\_\+\+N\+A\+M\+E\+S}}
\index{T\+N\+\_\+\+O\+L\+D\+\_\+\+T\+N\+K\+E\+R\+N\+E\+L\+\_\+\+N\+A\+M\+E\+S@{T\+N\+\_\+\+O\+L\+D\+\_\+\+T\+N\+K\+E\+R\+N\+E\+L\+\_\+\+N\+A\+M\+E\+S}!tn\+\_\+cfg\+\_\+default.\+h@{tn\+\_\+cfg\+\_\+default.\+h}}
\subsubsection[{T\+N\+\_\+\+O\+L\+D\+\_\+\+T\+N\+K\+E\+R\+N\+E\+L\+\_\+\+N\+A\+M\+E\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+N\+\_\+\+O\+L\+D\+\_\+\+T\+N\+K\+E\+R\+N\+E\+L\+\_\+\+N\+A\+M\+E\+S~1}}\label{tn__cfg__default_8h_ae9854c723c6a823c9126aa8390977d39}


Whether old T\+N\+Kernel names (definitions, functions, etc) should be available. 

If you're porting your existing application written for T\+N\+Kernel, it is definitely worth enabling. If you start new project with T\+Neo\+Kernel from scratch, it's better to avoid old names. 

Definition at line 131 of file tn\+\_\+cfg\+\_\+default.\+h.

\hypertarget{tn__cfg__default_8h_a6ed3ec7b0d4338e7f60dde86b7ea5fa4}{\index{tn\+\_\+cfg\+\_\+default.\+h@{tn\+\_\+cfg\+\_\+default.\+h}!T\+N\+\_\+\+M\+U\+T\+E\+X\+\_\+\+D\+E\+A\+D\+L\+O\+C\+K\+\_\+\+D\+E\+T\+E\+C\+T@{T\+N\+\_\+\+M\+U\+T\+E\+X\+\_\+\+D\+E\+A\+D\+L\+O\+C\+K\+\_\+\+D\+E\+T\+E\+C\+T}}
\index{T\+N\+\_\+\+M\+U\+T\+E\+X\+\_\+\+D\+E\+A\+D\+L\+O\+C\+K\+\_\+\+D\+E\+T\+E\+C\+T@{T\+N\+\_\+\+M\+U\+T\+E\+X\+\_\+\+D\+E\+A\+D\+L\+O\+C\+K\+\_\+\+D\+E\+T\+E\+C\+T}!tn\+\_\+cfg\+\_\+default.\+h@{tn\+\_\+cfg\+\_\+default.\+h}}
\subsubsection[{T\+N\+\_\+\+M\+U\+T\+E\+X\+\_\+\+D\+E\+A\+D\+L\+O\+C\+K\+\_\+\+D\+E\+T\+E\+C\+T}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+N\+\_\+\+M\+U\+T\+E\+X\+\_\+\+D\+E\+A\+D\+L\+O\+C\+K\+\_\+\+D\+E\+T\+E\+C\+T~1}}\label{tn__cfg__default_8h_a6ed3ec7b0d4338e7f60dde86b7ea5fa4}


Whether R\+T\+O\+S should detect deadlocks and notify user about them via callback. 

\begin{DoxySeeAlso}{See also}
see {\ttfamily \hyperlink{tn__sys_8h_aaa4a5c2feb4a0db5993b81dde496edc3}{tn\+\_\+callback\+\_\+deadlock\+\_\+set()}} 
\end{DoxySeeAlso}


Definition at line 155 of file tn\+\_\+cfg\+\_\+default.\+h.

\hypertarget{tn__cfg__default_8h_afef2a6ec1baa81edaa979024af0c924a}{\index{tn\+\_\+cfg\+\_\+default.\+h@{tn\+\_\+cfg\+\_\+default.\+h}!T\+N\+\_\+\+T\+I\+C\+K\+\_\+\+L\+I\+S\+T\+S\+\_\+\+C\+N\+T@{T\+N\+\_\+\+T\+I\+C\+K\+\_\+\+L\+I\+S\+T\+S\+\_\+\+C\+N\+T}}
\index{T\+N\+\_\+\+T\+I\+C\+K\+\_\+\+L\+I\+S\+T\+S\+\_\+\+C\+N\+T@{T\+N\+\_\+\+T\+I\+C\+K\+\_\+\+L\+I\+S\+T\+S\+\_\+\+C\+N\+T}!tn\+\_\+cfg\+\_\+default.\+h@{tn\+\_\+cfg\+\_\+default.\+h}}
\subsubsection[{T\+N\+\_\+\+T\+I\+C\+K\+\_\+\+L\+I\+S\+T\+S\+\_\+\+C\+N\+T}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+N\+\_\+\+T\+I\+C\+K\+\_\+\+L\+I\+S\+T\+S\+\_\+\+C\+N\+T~8}}\label{tn__cfg__default_8h_afef2a6ec1baa81edaa979024af0c924a}


Number of \char`\"{}tick\char`\"{} lists of timers, must be a power or two; minimum value\+: {\ttfamily 2}; typical values\+: {\ttfamily 4}, {\ttfamily 8} or {\ttfamily 16}. 

Refer to the \hyperlink{tn__timer_8h_timers_implementation}{Implementation of timers} for details.

Shortly\+: this value represents number of elements in the array of {\ttfamily struct T\+N\+\_\+\+List\+Item}, on 32-\/bit system each element takes 8 bytes.

The larger value, the more memory is needed, and the faster {\itshape \hyperlink{quick_guide_time_ticks}{system timer}} I\+S\+R works. If your application has a lot of timers and/or sleeping tasks, consider incrementing this value; otherwise, default value should work for you. 

Definition at line 173 of file tn\+\_\+cfg\+\_\+default.\+h.

\hypertarget{tn__cfg__default_8h_a2a1148efc6a74131cc83ee50cbc386cd}{\index{tn\+\_\+cfg\+\_\+default.\+h@{tn\+\_\+cfg\+\_\+default.\+h}!T\+N\+\_\+\+A\+P\+I\+\_\+\+M\+A\+K\+E\+\_\+\+A\+L\+I\+G\+\_\+\+A\+R\+G@{T\+N\+\_\+\+A\+P\+I\+\_\+\+M\+A\+K\+E\+\_\+\+A\+L\+I\+G\+\_\+\+A\+R\+G}}
\index{T\+N\+\_\+\+A\+P\+I\+\_\+\+M\+A\+K\+E\+\_\+\+A\+L\+I\+G\+\_\+\+A\+R\+G@{T\+N\+\_\+\+A\+P\+I\+\_\+\+M\+A\+K\+E\+\_\+\+A\+L\+I\+G\+\_\+\+A\+R\+G}!tn\+\_\+cfg\+\_\+default.\+h@{tn\+\_\+cfg\+\_\+default.\+h}}
\subsubsection[{T\+N\+\_\+\+A\+P\+I\+\_\+\+M\+A\+K\+E\+\_\+\+A\+L\+I\+G\+\_\+\+A\+R\+G}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+N\+\_\+\+A\+P\+I\+\_\+\+M\+A\+K\+E\+\_\+\+A\+L\+I\+G\+\_\+\+A\+R\+G~{\bf T\+N\+\_\+\+A\+P\+I\+\_\+\+M\+A\+K\+E\+\_\+\+A\+L\+I\+G\+\_\+\+A\+R\+G\+\_\+\+\_\+\+S\+I\+Z\+E}}}\label{tn__cfg__default_8h_a2a1148efc6a74131cc83ee50cbc386cd}


A\+P\+I option for {\ttfamily \hyperlink{tn__oldsymbols_8h_aa42d2e6b5b7ff37bd485803fa2cb70a8}{M\+A\+K\+E\+\_\+\+A\+L\+I\+G()}} macro. 

There is a terrible mess with {\ttfamily \hyperlink{tn__oldsymbols_8h_aa42d2e6b5b7ff37bd485803fa2cb70a8}{M\+A\+K\+E\+\_\+\+A\+L\+I\+G()}} macro\+: original T\+N\+Kernel docs specify that the argument of it should be the size to align, but almost all ports, including \char`\"{}original\char`\"{} one, defined it so that it takes type, not size.

But the port by Alex\+B implemented it differently (i.\+e. accordingly to the docs)

When I was moving from the port by Alex\+B to another one, do you have any idea how much time it took me to figure out why do I have rare weird bug? \+:)

So, available options\+:


\begin{DoxyItemize}
\item {\ttfamily \hyperlink{tn__common_8h_a04321413cf21754a05682b298df0493d}{T\+N\+\_\+\+A\+P\+I\+\_\+\+M\+A\+K\+E\+\_\+\+A\+L\+I\+G\+\_\+\+A\+R\+G\+\_\+\+\_\+\+T\+Y\+P\+E}}\+: In this case, you should use macro like this\+: {\ttfamily \hyperlink{tn__common_8h_a9a19aa6a6d04aabfb896ddf913516d77}{T\+N\+\_\+\+M\+A\+K\+E\+\_\+\+A\+L\+I\+G(struct my\+\_\+struct)}} This way is used in the majority of T\+N\+Kernel ports. (actually, in all ports except the one by Alex\+B)
\item {\ttfamily \hyperlink{tn__common_8h_a4972bf0cbc72e51a7463cf7d786d2b64}{T\+N\+\_\+\+A\+P\+I\+\_\+\+M\+A\+K\+E\+\_\+\+A\+L\+I\+G\+\_\+\+A\+R\+G\+\_\+\+\_\+\+S\+I\+Z\+E}}\+: In this case, you should use macro like this\+: {\ttfamily \hyperlink{tn__common_8h_a9a19aa6a6d04aabfb896ddf913516d77}{T\+N\+\_\+\+M\+A\+K\+E\+\_\+\+A\+L\+I\+G(sizeof(struct my\+\_\+struct))}} This way is stated in T\+N\+Kernel docs and used in the port for ds\+P\+I\+C/\+P\+I\+C24/\+P\+I\+C32 by Alex\+B. 
\end{DoxyItemize}

Definition at line 205 of file tn\+\_\+cfg\+\_\+default.\+h.

