<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>TNeo: arch/tn_arch.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-7163754-5', 'auto');
  ga('send', 'pageview');
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TNeo
   &#160;<span id="projectnumber">v1.08</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ea9599923402ca8ab47fc3e495999dea.html">arch</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tn_arch.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Architecture-dependent routines declaration. </p>

<p class="definition">Definition in file <a class="el" href="tn__arch_8h_source.html">tn_arch.h</a>.</p>
</div>
<p><a href="tn__arch_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2b3f2294ac42a599662c573394b14c75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__arch_8h.html#a2b3f2294ac42a599662c573394b14c75">tn_arch_int_dis</a> (void)</td></tr>
<tr class="memdesc:a2b3f2294ac42a599662c573394b14c75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unconditionally disable <em>system interrupts</em>.  <a href="#a2b3f2294ac42a599662c573394b14c75">More...</a><br /></td></tr>
<tr class="separator:a2b3f2294ac42a599662c573394b14c75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2997c6d98ac43cb90216fc4e8137bcfb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__arch_8h.html#a2997c6d98ac43cb90216fc4e8137bcfb">tn_arch_int_en</a> (void)</td></tr>
<tr class="memdesc:a2997c6d98ac43cb90216fc4e8137bcfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unconditionally enable interrupts.  <a href="#a2997c6d98ac43cb90216fc4e8137bcfb">More...</a><br /></td></tr>
<tr class="separator:a2997c6d98ac43cb90216fc4e8137bcfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7078b776570ca67a51b89d2746bdb6f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__arch_8h.html#a7078b776570ca67a51b89d2746bdb6f7">tn_arch_sr_save_int_dis</a> (void)</td></tr>
<tr class="memdesc:a7078b776570ca67a51b89d2746bdb6f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable <em>system interrupts</em> and return previous value of status register, atomically.  <a href="#a7078b776570ca67a51b89d2746bdb6f7">More...</a><br /></td></tr>
<tr class="separator:a7078b776570ca67a51b89d2746bdb6f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa755327bd8c4e4303c87c2b0cbed0f17"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__arch_8h.html#aa755327bd8c4e4303c87c2b0cbed0f17">tn_arch_sr_restore</a> (<a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a> sr)</td></tr>
<tr class="memdesc:aa755327bd8c4e4303c87c2b0cbed0f17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore previously saved status register.  <a href="#aa755327bd8c4e4303c87c2b0cbed0f17">More...</a><br /></td></tr>
<tr class="separator:aa755327bd8c4e4303c87c2b0cbed0f17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19e3b6ac25f75016b316ee217114e26d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__arch_8h.html#a19e3b6ac25f75016b316ee217114e26d">tn_arch_sched_dis_save</a> (void)</td></tr>
<tr class="memdesc:a19e3b6ac25f75016b316ee217114e26d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable kernel scheduler and return previous state.  <a href="#a19e3b6ac25f75016b316ee217114e26d">More...</a><br /></td></tr>
<tr class="separator:a19e3b6ac25f75016b316ee217114e26d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad607fcabe50af27f55f41082fde2ec3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__arch_8h.html#ad607fcabe50af27f55f41082fde2ec3e">tn_arch_sched_restore</a> (<a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a> sched_state)</td></tr>
<tr class="memdesc:ad607fcabe50af27f55f41082fde2ec3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore state of the kernel scheduler.  <a href="#ad607fcabe50af27f55f41082fde2ec3e">More...</a><br /></td></tr>
<tr class="separator:ad607fcabe50af27f55f41082fde2ec3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfec508be4a01fd3b251dbbeec12d7d6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__arch_8h.html#adfec508be4a01fd3b251dbbeec12d7d6">_tn_arch_stack_init</a> (<a class="el" href="tn__common_8h.html#a603cbe1ffdafc7e6813ef692bbd7d22f">TN_TaskBody</a> *task_func, <a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a> *stack_low_addr, <a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a> *stack_high_addr, void *param)</td></tr>
<tr class="memdesc:adfec508be4a01fd3b251dbbeec12d7d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should put initial CPU context to the provided stack pointer for new task and return current stack pointer.  <a href="#adfec508be4a01fd3b251dbbeec12d7d6">More...</a><br /></td></tr>
<tr class="separator:adfec508be4a01fd3b251dbbeec12d7d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34ffbae8b6837f7f3014bca9991e2272"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__arch_8h.html#a34ffbae8b6837f7f3014bca9991e2272">_tn_arch_inside_isr</a> (void)</td></tr>
<tr class="memdesc:a34ffbae8b6837f7f3014bca9991e2272"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should return 1 if <em>system ISR</em> is currently running, 0 otherwise.  <a href="#a34ffbae8b6837f7f3014bca9991e2272">More...</a><br /></td></tr>
<tr class="separator:a34ffbae8b6837f7f3014bca9991e2272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a024f41d79c823ecac5ed6b83c36f164e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__arch_8h.html#a024f41d79c823ecac5ed6b83c36f164e">_tn_arch_is_int_disabled</a> (void)</td></tr>
<tr class="memdesc:a024f41d79c823ecac5ed6b83c36f164e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should return 1 if <em>system interrupts</em> are currently disabled, 0 otherwise.  <a href="#a024f41d79c823ecac5ed6b83c36f164e">More...</a><br /></td></tr>
<tr class="separator:a024f41d79c823ecac5ed6b83c36f164e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28871f82c82d549092930dd4842e2980"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__arch_8h.html#a28871f82c82d549092930dd4842e2980">_tn_arch_context_switch_pend</a> (void)</td></tr>
<tr class="memdesc:a28871f82c82d549092930dd4842e2980"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called whenever we need to switch context from one task to another.  <a href="#a28871f82c82d549092930dd4842e2980">More...</a><br /></td></tr>
<tr class="separator:a28871f82c82d549092930dd4842e2980"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd5f43f42f5645de164ba6d13d3a4bcf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__arch_8h.html#afd5f43f42f5645de164ba6d13d3a4bcf">_tn_arch_context_switch_now_nosave</a> (void)</td></tr>
<tr class="memdesc:afd5f43f42f5645de164ba6d13d3a4bcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called whenever we need to switch context to new task, but don't save current context.  <a href="#afd5f43f42f5645de164ba6d13d3a4bcf">More...</a><br /></td></tr>
<tr class="separator:afd5f43f42f5645de164ba6d13d3a4bcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b4b954fc132b3426ca8b564a38efc20"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__arch_8h.html#a8b4b954fc132b3426ca8b564a38efc20">_tn_arch_sys_start</a> (<a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a> *int_stack, <a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a> int_stack_size)</td></tr>
<tr class="memdesc:a8b4b954fc132b3426ca8b564a38efc20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs first context switch to the first task (<code>_tn_next_task_to_run</code> is already set to needed task).  <a href="#a8b4b954fc132b3426ca8b564a38efc20">More...</a><br /></td></tr>
<tr class="separator:a8b4b954fc132b3426ca8b564a38efc20"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2b3f2294ac42a599662c573394b14c75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b3f2294ac42a599662c573394b14c75">&#9670;&nbsp;</a></span>tn_arch_int_dis()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tn_arch_int_dis </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unconditionally disable <em>system interrupts</em>. </p>
<p>Refer to the section <a class="el" href="interrupts.html#interrupt_types">Interrupt types</a> for details on what is <em>system interrupt</em>. </p>

</div>
</div>
<a id="a2997c6d98ac43cb90216fc4e8137bcfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2997c6d98ac43cb90216fc4e8137bcfb">&#9670;&nbsp;</a></span>tn_arch_int_en()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tn_arch_int_en </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unconditionally enable interrupts. </p>
<p>Refer to the section <a class="el" href="interrupts.html#interrupt_types">Interrupt types</a> for details on what is <em>system interrupt</em>. </p>

</div>
</div>
<a id="a7078b776570ca67a51b89d2746bdb6f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7078b776570ca67a51b89d2746bdb6f7">&#9670;&nbsp;</a></span>tn_arch_sr_save_int_dis()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a> tn_arch_sr_save_int_dis </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable <em>system interrupts</em> and return previous value of status register, atomically. </p>
<p>Refer to the section <a class="el" href="interrupts.html#interrupt_types">Interrupt types</a> for details on what is <em>system interrupt</em>.</p>
<dl class="section see"><dt>See also</dt><dd><code><a class="el" href="tn__arch_8h.html#aa755327bd8c4e4303c87c2b0cbed0f17" title="Restore previously saved status register. ">tn_arch_sr_restore()</a></code> </dd></dl>

</div>
</div>
<a id="aa755327bd8c4e4303c87c2b0cbed0f17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa755327bd8c4e4303c87c2b0cbed0f17">&#9670;&nbsp;</a></span>tn_arch_sr_restore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tn_arch_sr_restore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a>&#160;</td>
          <td class="paramname"><em>sr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restore previously saved status register. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sr</td><td>status register value previously from <code><a class="el" href="tn__arch_8h.html#a7078b776570ca67a51b89d2746bdb6f7" title="Disable system interrupts and return previous value of status register, atomically. ">tn_arch_sr_save_int_dis()</a></code></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><code><a class="el" href="tn__arch_8h.html#a7078b776570ca67a51b89d2746bdb6f7" title="Disable system interrupts and return previous value of status register, atomically. ">tn_arch_sr_save_int_dis()</a></code> </dd></dl>

</div>
</div>
<a id="a19e3b6ac25f75016b316ee217114e26d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19e3b6ac25f75016b316ee217114e26d">&#9670;&nbsp;</a></span>tn_arch_sched_dis_save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a> tn_arch_sched_dis_save </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable kernel scheduler and return previous state. </p>
<dl class="section return"><dt>Returns</dt><dd>Scheduler state to be restored later by <code><a class="el" href="tn__arch_8h.html#ad607fcabe50af27f55f41082fde2ec3e" title="Restore state of the kernel scheduler. ">tn_arch_sched_restore()</a></code>. </dd></dl>

</div>
</div>
<a id="ad607fcabe50af27f55f41082fde2ec3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad607fcabe50af27f55f41082fde2ec3e">&#9670;&nbsp;</a></span>tn_arch_sched_restore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tn_arch_sched_restore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a>&#160;</td>
          <td class="paramname"><em>sched_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restore state of the kernel scheduler. </p>
<p>See <code><a class="el" href="tn__arch_8h.html#a19e3b6ac25f75016b316ee217114e26d" title="Disable kernel scheduler and return previous state. ">tn_arch_sched_dis_save()</a></code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sched_state</td><td>Value returned from <code><a class="el" href="tn__arch_8h.html#a19e3b6ac25f75016b316ee217114e26d" title="Disable kernel scheduler and return previous state. ">tn_arch_sched_dis_save()</a></code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adfec508be4a01fd3b251dbbeec12d7d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfec508be4a01fd3b251dbbeec12d7d6">&#9670;&nbsp;</a></span>_tn_arch_stack_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a>* _tn_arch_stack_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tn__common_8h.html#a603cbe1ffdafc7e6813ef692bbd7d22f">TN_TaskBody</a> *&#160;</td>
          <td class="paramname"><em>task_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a> *&#160;</td>
          <td class="paramname"><em>stack_low_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a> *&#160;</td>
          <td class="paramname"><em>stack_high_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Should put initial CPU context to the provided stack pointer for new task and return current stack pointer. </p>
<p>When resulting context gets restored by <code><a class="el" href="tn__arch_8h.html#afd5f43f42f5645de164ba6d13d3a4bcf" title="Called whenever we need to switch context to new task, but don&#39;t save current context. ">_tn_arch_context_switch_now_nosave()</a></code> or <code><a class="el" href="tn__arch_8h.html#a28871f82c82d549092930dd4842e2980" title="Called whenever we need to switch context from one task to another. ">_tn_arch_context_switch_pend()</a></code>, the following conditions should be met:</p>
<ul>
<li>Interrupts are enabled;</li>
<li>Return address is set to <code><a class="el" href="tn__tasks_8h.html#a23e562731e616f01e325bc9830bcc021" title="This function terminates the currently running task. ">tn_task_exit()</a></code>, so that when task body function returns, <code><a class="el" href="tn__tasks_8h.html#a23e562731e616f01e325bc9830bcc021" title="This function terminates the currently running task. ">tn_task_exit()</a></code> gets automatially called;</li>
<li>Argument 0 contains <code>param</code> pointer</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task_func</td><td>Pointer to task body function. </td></tr>
    <tr><td class="paramname">stack_low_addr</td><td>Lowest address of the stack, independently of the architecture stack implementation </td></tr>
    <tr><td class="paramname">stack_high_addr</td><td>Highest address of the stack, independently of the architecture stack implementation </td></tr>
    <tr><td class="paramname">param</td><td>User-provided parameter for task body function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>current stack pointer (top of the stack) </dd></dl>

</div>
</div>
<a id="a34ffbae8b6837f7f3014bca9991e2272"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34ffbae8b6837f7f3014bca9991e2272">&#9670;&nbsp;</a></span>_tn_arch_inside_isr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int _tn_arch_inside_isr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Should return 1 if <em>system ISR</em> is currently running, 0 otherwise. </p>
<p>Refer to the section <a class="el" href="interrupts.html#interrupt_types">Interrupt types</a> for details on what is <em>system ISR</em>. </p>

</div>
</div>
<a id="a024f41d79c823ecac5ed6b83c36f164e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a024f41d79c823ecac5ed6b83c36f164e">&#9670;&nbsp;</a></span>_tn_arch_is_int_disabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int _tn_arch_is_int_disabled </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Should return 1 if <em>system interrupts</em> are currently disabled, 0 otherwise. </p>
<p>Refer to the section <a class="el" href="interrupts.html#interrupt_types">Interrupt types</a> for details on what is <em>system interrupt</em>. </p>

</div>
</div>
<a id="a28871f82c82d549092930dd4842e2980"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28871f82c82d549092930dd4842e2980">&#9670;&nbsp;</a></span>_tn_arch_context_switch_pend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _tn_arch_context_switch_pend </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called whenever we need to switch context from one task to another. </p>
<p>This function typically does NOT switch context; it merely pends it, that is, it sets appropriate interrupt flag. If current level is an application level, interrupt is fired immediately, and context gets switched. Otherwise (if some ISR is currently running), context switch keeps pending until all ISR return.</p>
<p><b>Preconditions:</b></p>
<ul>
<li>interrupts are enabled;</li>
<li><code>_tn_curr_run_task</code> points to currently running (preempted) task;</li>
<li><code>_tn_next_task_to_run</code> points to new task to run.</li>
</ul>
<p><b>Actions to perform in actual context switching routine:</b></p>
<ul>
<li>save context of the preempted task to its stack;</li>
<li>if preprocessor macro <code><a class="el" href="tn__cfg__dispatch_8h.html#afafafccc47ed18807179e8909ef18bee" title="Internal kernel definition: set to non-zero if _tn_sys_on_context_switch() should be called on contex...">_TN_ON_CONTEXT_SWITCH_HANDLER</a></code> is non-zero, call <code>_tn_sys_on_context_switch(_tn_curr_run_task, _tn_next_task_to_run);</code>.</li>
<li>set <code>_tn_curr_run_task</code> to <code>_tn_next_task_to_run</code>;</li>
<li>restore context of the newly activated task from its stack.</li>
</ul>
<dl class="section see"><dt>See also</dt><dd><code>_tn_curr_run_task</code> </dd>
<dd>
<code>_tn_next_task_to_run</code> </dd></dl>

</div>
</div>
<a id="afd5f43f42f5645de164ba6d13d3a4bcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd5f43f42f5645de164ba6d13d3a4bcf">&#9670;&nbsp;</a></span>_tn_arch_context_switch_now_nosave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _tn_arch_context_switch_now_nosave </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called whenever we need to switch context to new task, but don't save current context. </p>
<p>This happens:</p><ul>
<li>At system start, inside <code><a class="el" href="tn__sys_8h.html#a62ab25d9d8ca01c02d368968f19e49bf" title="Initial TNeo system start function, never returns. ">tn_sys_start()</a></code> (well, it is actually called indirectly but from <code><a class="el" href="tn__arch_8h.html#a8b4b954fc132b3426ca8b564a38efc20" title="Performs first context switch to the first task (_tn_next_task_to_run is already set to needed task)...">_tn_arch_sys_start()</a></code>);</li>
<li>At task exit, inside <code><a class="el" href="tn__tasks_8h.html#a23e562731e616f01e325bc9830bcc021" title="This function terminates the currently running task. ">tn_task_exit()</a></code>.</li>
</ul>
<p>This function doesn't need to pend context switch, it switches context immediately.</p>
<p><b>Preconditions:</b></p>
<ul>
<li>interrupts are disabled;</li>
<li><code>_tn_next_task_to_run</code> is already set to needed task.</li>
</ul>
<p><b>Actions to perform:</b></p>
<ul>
<li>if preprocessor macro <code><a class="el" href="tn__cfg__dispatch_8h.html#afafafccc47ed18807179e8909ef18bee" title="Internal kernel definition: set to non-zero if _tn_sys_on_context_switch() should be called on contex...">_TN_ON_CONTEXT_SWITCH_HANDLER</a></code> is non-zero, call <code>_tn_sys_on_context_switch(_tn_curr_run_task, _tn_next_task_to_run);</code>.</li>
<li>set <code>_tn_curr_run_task</code> to <code>_tn_next_task_to_run</code>;</li>
<li>restore context of the newly activated task from its stack.</li>
</ul>
<dl class="section see"><dt>See also</dt><dd><code>_tn_curr_run_task</code> </dd>
<dd>
<code>_tn_next_task_to_run</code> </dd></dl>

</div>
</div>
<a id="a8b4b954fc132b3426ca8b564a38efc20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b4b954fc132b3426ca8b564a38efc20">&#9670;&nbsp;</a></span>_tn_arch_sys_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _tn_arch_sys_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a> *&#160;</td>
          <td class="paramname"><em>int_stack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tn__arch__example_8h.html#ab80cba0fe9ffcd9011d53dfeb9e39bf4">TN_UWord</a>&#160;</td>
          <td class="paramname"><em>int_stack_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs first context switch to the first task (<code>_tn_next_task_to_run</code> is already set to needed task). </p>
<p>Typically, this function just calls <code><a class="el" href="tn__arch_8h.html#afd5f43f42f5645de164ba6d13d3a4bcf" title="Called whenever we need to switch context to new task, but don&#39;t save current context. ">_tn_arch_context_switch_now_nosave()</a></code>, but it also can perform any architecture-dependent actions first, if needed. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Feb 25 2017 20:43:32 for TNeo by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
