<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>TNeo: core/tn_sem.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-7163754-5', 'auto');
  ga('send', 'pageview');
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TNeo
   &#160;<span id="projectnumber">v1.05</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4270bfced15e0e73154b13468c7c9ad9.html">core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tn_sem.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A semaphore: an object to provide signaling mechanism. </p>
<p>There is a lot of confusion about differences between semaphores and mutexes, so, it's quite recommended to read small article by Michael Barr: <a href="http://goo.gl/YprPBW">Mutexes and Semaphores Demystified</a>.</p>
<p>Very short:</p>
<p>While mutex is seemingly similar to a semaphore with maximum count of <code>1</code> (the so-called binary semaphore), their usage is very different: the purpose of mutex is to protect shared resource. A locked mutex is "owned" by the task that locked it, and only the same task may unlock it. This ownership allows to implement algorithms to prevent priority inversion. So, mutex is a <em>locking mechanism</em>.</p>
<p>Semaphore, on the other hand, is <em>signaling mechanism</em>. It's quite legal and encouraged for semaphore to be waited for in the task A, and then signaled from task B or even from ISR. It may be used in situations like "producer
and consumer", etc.</p>
<p>In addition to the article mentioned above, you may want to look at the <a href="http://goo.gl/ZBReHK">related question on stackoverflow.com</a>. </p>

<p>Definition in file <a class="el" href="tn__sem_8h_source.html">tn_sem.h</a>.</p>
</div>
<p><a href="tn__sem_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structTN__Sem.html">TN_Sem</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Semaphore.  <a href="structTN__Sem.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a302b9a0fbb1843e38d95fdc1390d5c31"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sem_8h.html#a302b9a0fbb1843e38d95fdc1390d5c31">tn_sem_create</a> (struct <a class="el" href="structTN__Sem.html">TN_Sem</a> *sem, int start_count, int max_count)</td></tr>
<tr class="memdesc:a302b9a0fbb1843e38d95fdc1390d5c31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct the semaphore.  <a href="#a302b9a0fbb1843e38d95fdc1390d5c31">More...</a><br /></td></tr>
<tr class="separator:a302b9a0fbb1843e38d95fdc1390d5c31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a427022246912c9f2bea8a14033b4d103"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sem_8h.html#a427022246912c9f2bea8a14033b4d103">tn_sem_delete</a> (struct <a class="el" href="structTN__Sem.html">TN_Sem</a> *sem)</td></tr>
<tr class="memdesc:a427022246912c9f2bea8a14033b4d103"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destruct the semaphore.  <a href="#a427022246912c9f2bea8a14033b4d103">More...</a><br /></td></tr>
<tr class="separator:a427022246912c9f2bea8a14033b4d103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39f52729fc651ccef7696310d3642a24"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sem_8h.html#a39f52729fc651ccef7696310d3642a24">tn_sem_signal</a> (struct <a class="el" href="structTN__Sem.html">TN_Sem</a> *sem)</td></tr>
<tr class="memdesc:a39f52729fc651ccef7696310d3642a24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal the semaphore.  <a href="#a39f52729fc651ccef7696310d3642a24">More...</a><br /></td></tr>
<tr class="separator:a39f52729fc651ccef7696310d3642a24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a215fd97b86fc63192106bb30b0574d14"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sem_8h.html#a215fd97b86fc63192106bb30b0574d14">tn_sem_isignal</a> (struct <a class="el" href="structTN__Sem.html">TN_Sem</a> *sem)</td></tr>
<tr class="memdesc:a215fd97b86fc63192106bb30b0574d14"><td class="mdescLeft">&#160;</td><td class="mdescRight">The same as <code><a class="el" href="tn__sem_8h.html#a39f52729fc651ccef7696310d3642a24" title="Signal the semaphore. ">tn_sem_signal()</a></code> but for using in the ISR.  <a href="#a215fd97b86fc63192106bb30b0574d14">More...</a><br /></td></tr>
<tr class="separator:a215fd97b86fc63192106bb30b0574d14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfed2a27719c87638d2eb6edfdeea150"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sem_8h.html#acfed2a27719c87638d2eb6edfdeea150">tn_sem_wait</a> (struct <a class="el" href="structTN__Sem.html">TN_Sem</a> *sem, <a class="el" href="tn__common_8h.html#ac885b63d00c063de61cdbd80bf26d8aa">TN_TickCnt</a> timeout)</td></tr>
<tr class="memdesc:acfed2a27719c87638d2eb6edfdeea150"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for the semaphore.  <a href="#acfed2a27719c87638d2eb6edfdeea150">More...</a><br /></td></tr>
<tr class="separator:acfed2a27719c87638d2eb6edfdeea150"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dd4429a9f3942764b23025f2f2e364e"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sem_8h.html#a7dd4429a9f3942764b23025f2f2e364e">tn_sem_wait_polling</a> (struct <a class="el" href="structTN__Sem.html">TN_Sem</a> *sem)</td></tr>
<tr class="memdesc:a7dd4429a9f3942764b23025f2f2e364e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The same as <code><a class="el" href="tn__sem_8h.html#acfed2a27719c87638d2eb6edfdeea150" title="Wait for the semaphore. ">tn_sem_wait()</a></code> with zero timeout.  <a href="#a7dd4429a9f3942764b23025f2f2e364e">More...</a><br /></td></tr>
<tr class="separator:a7dd4429a9f3942764b23025f2f2e364e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22e181857dbc681f962cfda5d34d71c0"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tn__sem_8h.html#a22e181857dbc681f962cfda5d34d71c0">tn_sem_iwait_polling</a> (struct <a class="el" href="structTN__Sem.html">TN_Sem</a> *sem)</td></tr>
<tr class="memdesc:a22e181857dbc681f962cfda5d34d71c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The same as <code><a class="el" href="tn__sem_8h.html#acfed2a27719c87638d2eb6edfdeea150" title="Wait for the semaphore. ">tn_sem_wait()</a></code> with zero timeout, but for using in the ISR.  <a href="#a22e181857dbc681f962cfda5d34d71c0">More...</a><br /></td></tr>
<tr class="separator:a22e181857dbc681f962cfda5d34d71c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a302b9a0fbb1843e38d95fdc1390d5c31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a> tn_sem_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structTN__Sem.html">TN_Sem</a> *&#160;</td>
          <td class="paramname"><em>sem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>start_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct the semaphore. </p>
<p><code>id_sem</code> field should not contain <code><a class="el" href="tn__common_8h.html#ae779dd1f6735f6e139fb70acd004d976af358c7d5cb01d76f5a5d2d1e546c98a4" title="id for semaphores ">TN_ID_SEMAPHORE</a></code>, otherwise, <code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876a89909a6426b477a38496a1be67590e68" title="This code is returned by most of the kernel functions when wrong params were given to function...">TN_RC_WPARAM</a></code> is returned.</p>
<div class="image">
<img src="attr_call_task.png" alt="attr_call_task.png"/>
</div>
  <div class="image">
<img src="attr_call_int.png" alt="attr_call_int.png"/>
</div>
  <small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sem</td><td>Pointer to already allocated <code>struct <a class="el" href="structTN__Sem.html" title="Semaphore. ">TN_Sem</a></code> </td></tr>
    <tr><td class="paramname">start_count</td><td>Initial counter value, typically it is equal to <code>max_count</code> </td></tr>
    <tr><td class="paramname">max_count</td><td>Maximum counter value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876afb291924237186f5765865256c75e639" title="Successful operation. ">TN_RC_OK</a></code> if semaphore was successfully created;</li>
<li>If <code><a class="el" href="tn__cfg__default_8h.html#a1f197294df3276fec431930545acafd5" title="Enables additional param checking for most of the system functions. ">TN_CHECK_PARAM</a></code> is non-zero, additional return code is available: <code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876a89909a6426b477a38496a1be67590e68" title="This code is returned by most of the kernel functions when wrong params were given to function...">TN_RC_WPARAM</a></code>. </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a427022246912c9f2bea8a14033b4d103"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a> tn_sem_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structTN__Sem.html">TN_Sem</a> *&#160;</td>
          <td class="paramname"><em>sem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destruct the semaphore. </p>
<p>All tasks that wait for the semaphore become runnable with <code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876a3252967d2fdefcfbd4eb720ed4663d84" title="Object for whose event task was waiting is deleted. ">TN_RC_DELETED</a></code> code returned.</p>
<div class="image">
<img src="attr_call_task.png" alt="attr_call_task.png"/>
</div>
  <div class="image">
<img src="attr_call_ct_sw.png" alt="attr_call_ct_sw.png"/>
</div>
  <small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sem</td><td>semaphore to destruct</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876afb291924237186f5765865256c75e639" title="Successful operation. ">TN_RC_OK</a></code> if semaphore was successfully deleted;</li>
<li><code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876a886368391507ae426bfdedc38284db9d" title="Wrong context error: returned if function is called from non-acceptable context. ">TN_RC_WCONTEXT</a></code> if called from wrong context;</li>
<li>If <code><a class="el" href="tn__cfg__default_8h.html#a1f197294df3276fec431930545acafd5" title="Enables additional param checking for most of the system functions. ">TN_CHECK_PARAM</a></code> is non-zero, additional return codes are available: <code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876a89909a6426b477a38496a1be67590e68" title="This code is returned by most of the kernel functions when wrong params were given to function...">TN_RC_WPARAM</a></code> and <code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876a2a2df8fecee990d279889924926bf101" title="Returned when user tries to perform some operation on invalid object (mutex, semaphore, etc). ">TN_RC_INVALID_OBJ</a></code>. </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a39f52729fc651ccef7696310d3642a24"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a> tn_sem_signal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structTN__Sem.html">TN_Sem</a> *&#160;</td>
          <td class="paramname"><em>sem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal the semaphore. </p>
<p>If current semaphore counter (<code>count</code>) is less than <code>max_count</code>, counter is incremented by one, and first task (if any) that <a class="el" href="tn__sem_8h.html#acfed2a27719c87638d2eb6edfdeea150">waits</a> for the semaphore becomes runnable with <code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876afb291924237186f5765865256c75e639" title="Successful operation. ">TN_RC_OK</a></code> returned from <code><a class="el" href="tn__sem_8h.html#acfed2a27719c87638d2eb6edfdeea150" title="Wait for the semaphore. ">tn_sem_wait()</a></code>.</p>
<p>if semaphore counter is already has its max value, no action performed and <code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876a77ac7e9b81ba707565e7fe5d4c793dec" title="This code is returned in the following cases: ">TN_RC_OVERFLOW</a></code> is returned</p>
<div class="image">
<img src="attr_call_task.png" alt="attr_call_task.png"/>
</div>
  <div class="image">
<img src="attr_call_ct_sw.png" alt="attr_call_ct_sw.png"/>
</div>
  <small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sem</td><td>semaphore to signal</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876afb291924237186f5765865256c75e639" title="Successful operation. ">TN_RC_OK</a></code> if successful</li>
<li><code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876a886368391507ae426bfdedc38284db9d" title="Wrong context error: returned if function is called from non-acceptable context. ">TN_RC_WCONTEXT</a></code> if called from wrong context;</li>
<li><code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876a77ac7e9b81ba707565e7fe5d4c793dec" title="This code is returned in the following cases: ">TN_RC_OVERFLOW</a></code> if <code>count</code> is already at maximum value (<code>max_count</code>)</li>
<li>If <code><a class="el" href="tn__cfg__default_8h.html#a1f197294df3276fec431930545acafd5" title="Enables additional param checking for most of the system functions. ">TN_CHECK_PARAM</a></code> is non-zero, additional return codes are available: <code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876a89909a6426b477a38496a1be67590e68" title="This code is returned by most of the kernel functions when wrong params were given to function...">TN_RC_WPARAM</a></code> and <code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876a2a2df8fecee990d279889924926bf101" title="Returned when user tries to perform some operation on invalid object (mutex, semaphore, etc). ">TN_RC_INVALID_OBJ</a></code>. </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a215fd97b86fc63192106bb30b0574d14"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a> tn_sem_isignal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structTN__Sem.html">TN_Sem</a> *&#160;</td>
          <td class="paramname"><em>sem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The same as <code><a class="el" href="tn__sem_8h.html#a39f52729fc651ccef7696310d3642a24" title="Signal the semaphore. ">tn_sem_signal()</a></code> but for using in the ISR. </p>
<div class="image">
<img src="attr_call_int.png" alt="attr_call_int.png"/>
</div>
  <div class="image">
<img src="attr_call_ct_sw.png" alt="attr_call_ct_sw.png"/>
</div>
  <small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small> </p>

</div>
</div>
<a class="anchor" id="acfed2a27719c87638d2eb6edfdeea150"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a> tn_sem_wait </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structTN__Sem.html">TN_Sem</a> *&#160;</td>
          <td class="paramname"><em>sem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tn__common_8h.html#ac885b63d00c063de61cdbd80bf26d8aa">TN_TickCnt</a>&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for the semaphore. </p>
<p>If the current semaphore counter (<code>count</code>) is non-zero, it is decremented and <code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876afb291924237186f5765865256c75e639" title="Successful operation. ">TN_RC_OK</a></code> is returned. Otherwise, behavior depends on <code>timeout</code> value: task might switch to <a class="el" href="tn__tasks_8h.html#a5e12e8a0ab280b515f44bf3fee1210a6aaa3dfaf2bb5992e0cef981618ce30d56"><code>WAIT</code></a> state until someone <a class="el" href="tn__sem_8h.html#a39f52729fc651ccef7696310d3642a24">signaled</a> the semaphore or until the <code>timeout</code> expired. refer to <code><a class="el" href="tn__common_8h.html#ac885b63d00c063de61cdbd80bf26d8aa" title="Type for system tick count, it is used by the kernel to represent absolute tick count value as well a...">TN_TickCnt</a></code>.</p>
<div class="image">
<img src="attr_call_task.png" alt="attr_call_task.png"/>
</div>
  <div class="image">
<img src="attr_call_ct_sw.png" alt="attr_call_ct_sw.png"/>
</div>
  <div class="image">
<img src="attr_timeout.png" alt="attr_timeout.png"/>
</div>
  <small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sem</td><td>semaphore to wait for </td></tr>
    <tr><td class="paramname">timeout</td><td>refer to <code><a class="el" href="tn__common_8h.html#ac885b63d00c063de61cdbd80bf26d8aa" title="Type for system tick count, it is used by the kernel to represent absolute tick count value as well a...">TN_TickCnt</a></code></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876afb291924237186f5765865256c75e639" title="Successful operation. ">TN_RC_OK</a></code> if waiting was successfull</li>
<li>Other possible return codes depend on <code>timeout</code> value, refer to <code><a class="el" href="tn__common_8h.html#ac885b63d00c063de61cdbd80bf26d8aa" title="Type for system tick count, it is used by the kernel to represent absolute tick count value as well a...">TN_TickCnt</a></code></li>
<li>If <code><a class="el" href="tn__cfg__default_8h.html#a1f197294df3276fec431930545acafd5" title="Enables additional param checking for most of the system functions. ">TN_CHECK_PARAM</a></code> is non-zero, additional return codes are available: <code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876a89909a6426b477a38496a1be67590e68" title="This code is returned by most of the kernel functions when wrong params were given to function...">TN_RC_WPARAM</a></code> and <code><a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876a2a2df8fecee990d279889924926bf101" title="Returned when user tries to perform some operation on invalid object (mutex, semaphore, etc). ">TN_RC_INVALID_OBJ</a></code>. </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a7dd4429a9f3942764b23025f2f2e364e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a> tn_sem_wait_polling </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structTN__Sem.html">TN_Sem</a> *&#160;</td>
          <td class="paramname"><em>sem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The same as <code><a class="el" href="tn__sem_8h.html#acfed2a27719c87638d2eb6edfdeea150" title="Wait for the semaphore. ">tn_sem_wait()</a></code> with zero timeout. </p>
<div class="image">
<img src="attr_call_task.png" alt="attr_call_task.png"/>
</div>
  <div class="image">
<img src="attr_call_ct_sw.png" alt="attr_call_ct_sw.png"/>
</div>
  <small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small> </p>

</div>
</div>
<a class="anchor" id="a22e181857dbc681f962cfda5d34d71c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="tn__common_8h.html#aa43bd3da1ad4c1e61224b5f23b369876">TN_RCode</a> tn_sem_iwait_polling </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structTN__Sem.html">TN_Sem</a> *&#160;</td>
          <td class="paramname"><em>sem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The same as <code><a class="el" href="tn__sem_8h.html#acfed2a27719c87638d2eb6edfdeea150" title="Wait for the semaphore. ">tn_sem_wait()</a></code> with zero timeout, but for using in the ISR. </p>
<div class="image">
<img src="attr_call_int.png" alt="attr_call_int.png"/>
</div>
  <div class="image">
<img src="attr_call_ct_sw.png" alt="attr_call_ct_sw.png"/>
</div>
  <small><em>(refer to <a class="el" href="legend.html">Legend</a> for details)</em></small> </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jan 2 2015 03:12:24 for TNeo by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
