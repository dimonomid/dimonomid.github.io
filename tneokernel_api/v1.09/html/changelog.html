<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>TNeo: Changelog</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-7163754-5', 'auto');
  ga('send', 'pageview');
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TNeo
   &#160;<span id="projectnumber">v1.09</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Changelog </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#changelog_current">Current development version (BETA)</a></li>
<li class="level1"><a href="#changelog_v1_09">v1.09</a></li>
<li class="level1"><a href="#changelog_v1_08">v1.08</a></li>
<li class="level1"><a href="#changelog_v1_07">v1.07</a></li>
<li class="level1"><a href="#changelog_v1_06">v1.06</a></li>
<li class="level1"><a href="#changelog_v1_04">v1.04</a></li>
<li class="level1"><a href="#changelog_v1_03">v1.03</a></li>
<li class="level1"><a href="#changelog_v1_02">v1.02</a></li>
<li class="level1"><a href="#changelog_v1_01">v1.01</a></li>
<li class="level1"><a href="#changelog_v1_0">v1.0</a></li>
</ul>
</div>
<div class="textblock"><p>TNeo changelog</p>
<h1><a class="anchor" id="changelog_current"></a>
Current development version (BETA)</h1>
<p>no changes yet</p>
<h1><a class="anchor" id="changelog_v1_09"></a>
v1.09</h1>
<p>Release date: 2024-12-28</p>
<p>Most of the changes are various bugfixes provided by the community. Thanks a lot guys, I really appreciate the time and effort you spent on making this project better!</p>
<ul>
<li>Fix: at least on ARM Cortex-M7, and probably also on M3, M4 and some other ARMs, sometimes the context switch did not happen in time, and it was causing issues in e.g. <code>tn_eventgrp_wait</code>, where the waiting result was wrong. Thanks to <a href="https://github.com/AnatolShiro">Anatol Shiro</a> for identifying and <a href="https://github.com/dimonomid/tneo/commit/d036aa22269eb1d3557c2d1b6df4fd41fd1c55ec">fixing this bug</a>;</li>
<li>Fix: when the system is recovering from a deadlock (when one of the tasks stopped waiting after a timeout), the kernel was stuck in an endless loop. Thanks to <a href="https://github.com/travisgriggs">Travis Griggs</a> for identifying and <a href="https://github.com/dimonomid/tneo/commit/2d8e8d38635413fdd86fb7934b18e3637b3ffa04">fixing this bug</a>, as part of his effort to <a href="https://github.com/travisgriggs/tneo_tests">implement an even better set of tests for TNeo</a>;</li>
<li>Fix: when creating a higher-priority task from a lower-priority task, and the <code>TN_TASK_CREATE_OPT_START</code> flag was set, the kernel should switch context to the new task right away, but it wasn't happening. Again, thanks to <a href="https://github.com/travisgriggs">Travis Griggs</a> for <a href="https://github.com/dimonomid/tneo/commit/9d886c9448b9d93dcb07309bcc5b45c84a1bfdd9">this fix</a>;</li>
<li>Fix: the project was unable to build for 64-bit platforms where <code>unsigned long int</code> and <code>int</code> have different sizes. Thanks to <a href="https://github.com/alecoding">alecoding</a> for <a href="https://github.com/dimonomid/tneo/commit/5a89f5a39dd6ed60e09f4c0385aba294944f1265">the fix</a>;</li>
<li>Fix: the project was unable to build without <code>#TN_USE_MUTEXES</code> or <code>#TN_MUTEX_DEADLOCK_DETECT</code>;</li>
<li>Added support of <code>-pedantic</code> mode for Cortex-M architectures.</li>
</ul>
<h1><a class="anchor" id="changelog_v1_08"></a>
v1.08</h1>
<p>Release date: 2017-02-25</p>
<ul>
<li><b>Timers API changed</b>: now, timer callback <code>#TN_TimerFunc</code> is called with global interrupts enabled.</li>
<li>Fix for pic24/dspic: previously, initial value of PSVPAG for new tasks was always 0, but it is not necessarily the case. This might cause troubles with constants in program space. Now, when initializing stack for new task, current value of PSVPAG is used.</li>
<li>Fixed round robin:<ul>
<li>Even though the tasks were flipped in the runnable tasks queue, the actual context switch wasn't performed;</li>
<li>Tasks were switched with a requested period + 1 tick.</li>
</ul>
</li>
<li>Added an option <code>#TN_FORCED_INLINE</code></li>
<li>Added an option <code>#TN_MAX_INLINE</code></li>
</ul>
<h1><a class="anchor" id="changelog_v1_07"></a>
v1.07</h1>
<p>Release date: 2015-03-17</p>
<ul>
<li>Fix: project was unable to build with <code>#TN_CHECK_PARAM</code> set to 0</li>
<li>Fix: Cortex-M0/M0+ port didn't work if there is some on-context-switch handler (<code>#TN_PROFILER</code> or <code>#TN_STACK_OVERFLOW_CHECK</code>)</li>
<li>Added support of C++ compiler (experimental)</li>
<li>Added an option <code>#TN_INIT_INTERRUPT_STACK_SPACE</code></li>
<li>Added services to get count of free and used memory blocks (<code><a class="el" href="tn__fmem_8h.html#ae8b80e0a0a8b07e11acbc4f15f3ef32d" title="Returns number of free blocks in the memory pool.">tn_fmem_free_blocks_cnt_get()</a></code> / <code><a class="el" href="tn__fmem_8h.html#a2f23f2cdb3e6f3f2a1c1f9ebc4e6e8cb" title="Returns number of used (non-free) blocks in the memory pool.">tn_fmem_used_blocks_cnt_get()</a></code>) and items in the queue (<code><a class="el" href="tn__dqueue_8h.html#af541f16598e13f980ddc2482e6af6044" title="Returns number of free items in the queue.">tn_queue_free_items_cnt_get()</a></code> / <code><a class="el" href="tn__dqueue_8h.html#aa17fd667cab2e4a41d9e89b8cba603cd" title="Returns number of used (non-free) items in the queue.">tn_queue_used_items_cnt_get()</a></code>).</li>
<li>Removed some checks from <code><a class="el" href="tn__sys_8h.html#aa44d297639e0520420890ef2bb7e2c1c" title="Process system tick; should be called periodically, typically from some kind of timer ISR.">tn_tick_int_processing()</a></code>, since they aren't too useful there, but they add overhead (See <a href="https://bitbucket.org/dfrank/tneokernel/issue/2/system-clock-service-routine-could-be-more">bitbucket issue #2</a> )</li>
<li>Added functions for disabling/enabling scheduler: <code><a class="el" href="tn__sys_8h.html#af1502619506a9c92eb954e45ff0f461b" title="Disable kernel scheduler and return previous scheduler state.">tn_sched_dis_save()</a></code> / <code><a class="el" href="tn__sys_8h.html#a4cd5c9113872b2008184c567907653bd" title="Restore state of the kernel scheduler.">tn_sched_restore()</a></code>.</li>
<li>Id fields of objects (<code>enum #TN_ObjId</code>) are moved to the beginning of object structures, to make memory corruptions detected earlier.</li>
<li>Idle task is now created with name "Idle" specified.</li>
</ul>
<h1><a class="anchor" id="changelog_v1_06"></a>
v1.06</h1>
<p>Release date: 2015-01-02.</p>
<ul>
<li>Cortex-M0/M0+/M1/M3/M4/M4F architectures are now supported.<ul>
<li>The following compilers are tested:<ul>
<li>ARMCC (Keil RealView)</li>
<li>GCC</li>
</ul>
</li>
<li>Should work but not tested carefully:<ul>
<li>clang</li>
<li>IAR</li>
</ul>
</li>
</ul>
</li>
<li>Software task stack overflow check (optionally), see <code>#TN_STACK_OVERFLOW_CHECK</code> for details.</li>
<li>Dynamic tick, or <em>tickless</em> (optionally): refer to the page <a class="el" href="time_ticks.html">Time ticks</a> for details.</li>
<li>Profiler (optionally): allows to see how much time task was running, how much time it was waiting and for what it was waiting, and so on. Refer to the documentation of <code>struct #<a class="el" href="structTN__TaskTiming.html" title="Timing structure that is managed by profiler and can be read by #tn_task_profiler_timing_get() functi...">TN_TaskTiming</a></code> for details.</li>
<li>Old TNKernel events compatibility mode, see <code>#TN_OLD_EVENT_API</code> for details.</li>
<li>Event groups: added <code>#TN_EVENTGRP_WMODE_AUTOCLR</code> flag which allows to clear event bits atomically when task successfully finishes waiting for these event bits.</li>
<li>PIC24/dsPIC: little optimization: ffs (find-first-set bit) is implemented in an efficient PIC24/dsPIC-specific way, so finding next task to run now works a bit faster.</li>
<li><p class="startli">Added run-time check which ensures that build-time options for the kernel match ones for the application. For details, refer to the option <code>#TN_CHECK_BUILD_CFG</code>. <b>Note</b>: in your existing project that uses TNeo as a separate library, you need either:</p><ul>
<li>Include the file <code>&lt;tneo_path&gt;/src/tn_app_check.c</code> to the application project (recommended);</li>
<li>In your <code>tn_cfg.h</code> file, set <code>#TN_CHECK_BUILD_CFG</code> to <code>0</code> and rebuild the kernel with the new configuration (not recommended).</li>
</ul>
<p class="startli">But if you build TNeo together with the application, this option is useless, so then just set <code>#TN_CHECK_BUILD_CFG</code> to <code>0</code>.</p>
</li>
<li>MPLABX projects for PIC32 and PIC24/dsPIC moved to <code>lib_project</code> directory. If you use these library projects from the repository directly in your application, you need to modify path to the library project in your application project.</li>
<li>The project's name is shortened to <b>TNeo</b>.</li>
</ul>
<h1><a class="anchor" id="changelog_v1_04"></a>
v1.04</h1>
<p>Release date: 2014-11-04.</p>
<ul>
<li>Added PIC24/dsPIC support, refer to the page <a class="el" href="arch_specific.html#pic24_details">PIC24/dsPIC port details</a>;</li>
<li>PIC32: Core Software Interrupt is now handled by the kernel completely, application shouldn't set it up anymore. Refer to the page <a class="el" href="arch_specific.html#pic32_details">PIC32 port details</a>.</li>
<li>Refactor: the following symbols: <code>NULL</code>, <code>BOOL</code>, <code>TRUE</code>, <code>FALSE</code> now have the <code>TN_</code> prefix: <code>#TN_NULL</code>, <code>#TN_BOOL</code>, <code>#TN_TRUE</code>, <code>#TN_FALSE</code>. This is because non-prefixed symbols may be defined by some other program module, which leads to conflicts. The easiest and robust way is to add unique prefix.</li>
<li>Refactor: PIC32 MPLABX project renamed from <code>tneo.X</code> to <code>tneo_pic32.X</code>.</li>
<li>Refactor: PIC32 ISR macros renamed: <code><a class="el" href="tn__arch__pic32_8h.html#afde61cfabbeed1562ea2135fea8e919b" title="For compatibility with old projects, old name of tn_p32_soft_isr() macro is kept; please don&#39;t use it...">tn_soft_isr()</a></code> -&gt; <code><a class="el" href="tn__arch__pic32_8h.html#a02d853d8d573f928fb8da65ef0c2bc8e" title="Interrupt handler wrapper macro for software context saving.">tn_p32_soft_isr()</a></code>, <code><a class="el" href="tn__arch__pic32_8h.html#a714962dd7eb6b94feee7f4d769b601c0" title="For compatibility with old projects, old name of tn_p32_srs_isr() macro is kept; please don&#39;t use it ...">tn_srs_isr()</a></code> -&gt; <code><a class="el" href="tn__arch__pic32_8h.html#a523bb667617e6bb6f68a8f85855030a5" title="Interrupt handler wrapper macro for shadow register context saving.">tn_p32_srs_isr()</a></code>. It is much easier to maintain documentation for different macros if they have different names; more, the signature of these macros is architecture-dependent. Old names are also available for backward compatibility.</li>
</ul>
<h1><a class="anchor" id="changelog_v1_03"></a>
v1.03</h1>
<p>Release date: 2014-10-20.</p>
<ul>
<li>Added a capability to connect an <a class="el" href="tn__eventgrp_8h.html">event group</a> to other system objects, particularly to the <a class="el" href="tn__dqueue_8h.html">queue</a>. This offers a way to wait for messages from multiple queues with just a single system call. Refer to the section <a class="el" href="tn__eventgrp_8h.html#eventgrp_connect">Connecting an event group to other system objects</a> for details. Example project that demonstrates that technique is also available: <code>examples/queue_eventgrp_conn</code>.</li>
<li>PIC32 Interrupts: this isn't a mandatory anymore to use kernel-provided macros <code><a class="el" href="tn__arch__pic32_8h.html#a02d853d8d573f928fb8da65ef0c2bc8e" title="Interrupt handler wrapper macro for software context saving.">tn_p32_soft_isr()</a></code> or <code><a class="el" href="tn__arch__pic32_8h.html#a523bb667617e6bb6f68a8f85855030a5" title="Interrupt handler wrapper macro for shadow register context saving.">tn_p32_srs_isr()</a></code>: interrupts can be defined with standard way too: this particular ISR will use task's stack instead of interrupt stack, therefore it takes much more RAM and works a bit faster. There are no additional constraints on ISR defined without kernel-provided macro: in either ISR, you can call the same set of kernel services. Refer to the page <a class="el" href="interrupts.html">Interrupts</a> for details.</li>
<li>Priority 0 is now allowed to use by application (in the original TNKernel, it was reserved for the timer task, but TNeo <a class="el" href="tnkernel_diff.html#tnkernel_diff_timer_task">does not have timer task</a>)</li>
<li>Application is now available to specify how many priority levels does it need for, it helps to save a bit of RAM. For details, refer to <code>#TN_PRIORITIES_CNT</code>.</li>
<li>Added example project <code>examples/queue</code> that demonstrates the pattern on how to use <a class="el" href="tn__dqueue_8h.html">queue</a> together with <a class="el" href="tn__fmem_8h.html">fixed memory pool</a> effectively.</li>
</ul>
<h1><a class="anchor" id="changelog_v1_02"></a>
v1.02</h1>
<p>Release date: 2014-10-14.</p>
<ul>
<li>Added <a class="el" href="tn__timer_8h.html">timers</a>: kernel objects that are used to ask the kernel to call some user-provided function at a particular time in the future;</li>
<li>Removed <code>tn_sys_time_set()</code> function, because now TNeo uses internal system tick count for timers, and modifying system tick counter by user is a <em>really</em> bad idea.</li>
</ul>
<h1><a class="anchor" id="changelog_v1_01"></a>
v1.01</h1>
<p>Release date: 2014-10-09.</p>
<ul>
<li><b>FIX:</b> <code><a class="el" href="tn__dqueue_8h.html#ab47ed49af7dffc5a71eaabd25422d0e4" title="Receive the data element from the data queue specified by the dque and place it into the address spec...">tn_queue_receive()</a></code> and <code><a class="el" href="tn__fmem_8h.html#a2ecd094041dbd0e92d61b852b7952444" title="Get memory block from the pool.">tn_fmem_get()</a></code> : if non-zero <code>timeout</code> is in effect, then <code>#TN_RC_TIMEOUT</code> is returned, but user-provided pointer is altered anyway (some garbage data is written there). This bug was inherited from TNKernel.</li>
<li>Added <code><a class="el" href="tn__tasks_8h.html#a18408d825c0dab03511f3aaeeb3ffbb3" title="Get current state of the task; note that returned state is a bitmask, that is, states could be combin...">tn_task_state_get()</a></code></li>
<li><code><a class="el" href="tn__oldsymbols_8h.html#abdc5c428590ff525cdb566da613015ce" title="old name of #tn_sem_wait">tn_sem_acquire()</a></code> and friends are renamed to <code><a class="el" href="tn__sem_8h.html#acfed2a27719c87638d2eb6edfdeea150" title="Wait for the semaphore.">tn_sem_wait()</a></code> and friends. More on this read <a class="el" href="tnkernel_diff.html#tnkernel_diff_api_rename_sem">here</a>. Old name is still available through <code><a class="el" href="tn__oldsymbols_8h.html">tn_oldsymbols.h</a></code>.</li>
</ul>
<h1><a class="anchor" id="changelog_v1_0"></a>
v1.0</h1>
<p>Release date: 2014-10-01.</p>
<ul>
<li>Initial stable version of TNeo. Lots of work done: thorough review and re-implementation of TNKernel 2.7, implemented detailed unit tests, and so on. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Dec 28 2024 20:20:49 for TNeo by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
