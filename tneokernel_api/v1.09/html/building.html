<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>TNeo: Building TNeo</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-7163754-5', 'auto');
  ga('send', 'pageview');
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TNeo
   &#160;<span id="projectnumber">v1.09</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Building TNeo </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#configuration_file">Configuration file</a></li>
<li class="level1"><a href="#building_generic__makefile_lib_project">Makefile or library projects</a><ul><li class="level2"><a href="#building_generic__makefile">Makefile</a></li>
<li class="level2"><a href="#building_generic__lib_project">Library project</a></li>
</ul>
</li>
<li class="level1"><a href="#building_generic__manual">Building manually</a></li>
</ul>
</div>
<div class="textblock"><p>Some notes on building the project.</p>
<p>Note: you don't <em>have</em> to build TNeo to use it. If you want to just use pre-built library (with default configuration), refer to the section <a class="el" href="quick_guide.html#usage_generic">Using TNeo in your application</a>.</p>
<h1><a class="anchor" id="configuration_file"></a>
Configuration file</h1>
<p>TNeo is intended to be built as a library, separately from main project (although nothing prevents you from bundling things together, if you want to).</p>
<p>There are various options available which affects API and behavior of the kernel. But these options are specific for particular project, and aren't related to the kernel itself, so we need to keep them separately.</p>
<p>To this end, file <code><a class="el" href="tn_8h.html">tn.h</a></code> (the main kernel header file) includes <code>tn_cfg.h</code>, which isn't included in the repository (even more, it is added to <code>.hgignore</code> list actually). Instead, default configuration file <code><a class="el" href="tn__cfg__default_8h.html">tn_cfg_default.h</a></code> is provided, and when you just cloned the repository, you might want to copy it as <code>tn_cfg.h</code>. Or even better, if your filesystem supports symbolic links, copy it somewhere to your main project's directory (so that you can add it to your VCS there), and create symlink to it named <code>tn_cfg.h</code> in the TNeo source directory, like this: </p><pre class="fragment">$ cd /path/to/tneo/src
$ cp ./tn_cfg_default.h /path/to/main/project/lib_cfg/tn_cfg.h
$ ln -s /path/to/main/project/lib_cfg/tn_cfg.h ./tn_cfg.h
</pre><p>Default configuration file contains detailed comments, so you can read them and configure behavior as you like.</p>
<h1><a class="anchor" id="building_generic__makefile_lib_project"></a>
Makefile or library projects</h1>
<p>If you need to build TNeo with some non-default configuration, the easiest way is to use ready-made Makefile or library project.</p>
<h2><a class="anchor" id="building_generic__makefile"></a>
Makefile</h2>
<p>It is tested only in Unix-like environment, so that you can't use makefile to build the kernel with Keil Realview or IAR. For Keil Realview or IAR, use library project (see the section below).</p>
<p>There are two makefiles available: <code>Makefile-all-arch</code> and <code>Makefile</code>.</p>
<p>The first one is used to build all possible targets at once, so it is more for the kernel developer than for kernel user. The second one is used to build the kernel for some particular architecture, and it takes two params: <code>TN_ARCH</code> and <code>TN_COMPILER</code>.</p>
<p>Valid values for <code>TN_ARCH</code> are:</p>
<ul>
<li><code>cortex_m0</code> - for Cortex-M0 architecture,</li>
<li><code>cortex_m0plus</code> - for Cortex-M0+ architecture,</li>
<li><code>cortex_m1</code> - for Cortex-M1 architecture,</li>
<li><code>cortex_m3</code> - for Cortex-M3 architecture,</li>
<li><code>cortex_m4</code> - for Cortex-M4 architecture,</li>
<li><code>cortex_m4f</code> - for Cortex-M4F architecture,</li>
<li><code>pic32mx</code> - for PIC32MX architecture,</li>
<li><code>pic24_dspic_noeds</code> - for PIC24/dsPIC architecture without EDS (Extended Data Space),</li>
<li><code>pic24_dspic_eds</code> - for PIC24/dsPIC architecture with EDS.</li>
</ul>
<p>Valid values for <code>TN_COMPILER</code> depend on architecture. For Cortex-M series, they are:</p>
<ul>
<li><code>arm-none-eabi-gcc</code> (you need <a href="https://launchpad.net/~terry.guo/+archive/ubuntu/gcc-arm-embedded">GNU ARM Embedded toolchain</a>)</li>
<li><code>clang</code> (you need <a href="http://clang.llvm.org/">LLVM clang</a>)</li>
</ul>
<p>For PIC32, just one value is valid:</p>
<ul>
<li><code>xc32</code> (you need <a href="http://www.microchip.com/xc32">Microchip XC32 compiler</a>)</li>
</ul>
<p>For PIC24/dsPIC, just one value is valid:</p>
<ul>
<li><code>xc16</code> (you need <a href="http://www.microchip.com/xc16">Microchip XC16 compiler</a>)</li>
</ul>
<p>Example invocation (from the TNeo's root directory) :</p>
<p><code>$ make TN_ARCH=cortex_m3 TN_COMPILER=arm-none-eabi-gcc</code></p>
<p>As a result, there will be archive library file <code>bin/cortex_m3/arm-none-eabi-gcc/tneo_cortex_m3_arm-none-eabi-gcc.a</code></p>
<h2><a class="anchor" id="building_generic__lib_project"></a>
Library project</h2>
<p>In the root of TNeo repository, there is a directory <code>lib_project</code> which contains ready-made projects for various platforms. You may use it for building library, and then use resulting library file in your project.</p>
<p>For MPLABX projects, there are <em>library projects</em>, so that you even don't need to build a library: just add this <em>library project</em> to your main project, and MPLABX will do all the work for you. You can change <code>tn_cfg.h</code> file "on-the-fly" then. Other IDEs don't offer such a luxuries, so you need to build library file as a separate step.</p>
<h1><a class="anchor" id="building_generic__manual"></a>
Building manually</h1>
<p>If you want to create library project yourself (say, in some different IDE, or anything), or if you want to build TNeo as a direct part of your project, there are some generic requirements (there might be additional architecture-dependent requirements, see links below):</p>
<ul>
<li><b>Core sources</b>: add all <code>.c</code> files from <code>src/core</code> directory to the project.</li>
<li><b>C99</b>: TNeo uses some features of C99, such as <code>static inline</code> functions and variable declarations not at the start of a compound statement. So, C99 is a requirement.</li>
<li><b>C Include directories</b> (relative to the root of the repository) :<ul>
<li><code>src</code></li>
<li><code>src/core</code></li>
<li><code>src/core/internal</code></li>
<li><code>src/arch</code></li>
</ul>
</li>
<li><b>Assembler preprocessor Include directories</b> (relative to the root of the repository) :<ul>
<li><code>src</code></li>
<li><code>src/core</code></li>
</ul>
</li>
<li><b><code>.S</code> files preprocessed by C preprocessor</b>: This is probably more arch-dependent requirement than a generic one, but actually <code>.S</code> files for all supported architectures need to be preprocessed, so it is specified here. On most platforms, it works "out-of-the-box", on some others, you need to perform additional steps for it: in these cases, necessary steps explained in the "building" section for the appropriate architecture, see links below.</li>
<li><b>Isolate each function in a section</b> Not a requirement, but recommendation: for embedded designs, it is usually a good idea to isolate each function in a section, so that in your application you can set linker option like "remove unused sections", and save notable amount of flash memory.</li>
</ul>
<p>For arch-dependent information on building TNeo, please refer to the appropriate section:</p>
<ul>
<li><a class="el" href="arch_specific.html#pic24_building">Building for PIC24/dsPIC</a></li>
<li><a class="el" href="arch_specific.html#pic32_building">Building for PIC32</a></li>
<li><a class="el" href="arch_specific.html#cortex_m_building">Building for Cortex-M0/M1/M3/M4/M4F</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Dec 28 2024 20:20:49 for TNeo by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
