\hypertarget{tn__fmem_8h}{}\doxysection{core/tn\+\_\+fmem.h File Reference}
\label{tn__fmem_8h}\index{core/tn\_fmem.h@{core/tn\_fmem.h}}


\doxysubsection{Detailed Description}
Fixed memory blocks pool.

A fixed-\/sized memory blocks pool is used for managing fixed-\/sized memory blocks dynamically. A pool has a memory area where fixed-\/sized memory blocks are allocated and the wait queue for acquiring a memory block. If there are no free memory blocks, a task trying to acquire a memory block will be placed into the wait queue until a free memory block arrives (another task returns it to the memory pool).

The operations of getting the block from memory pool and releasing it back take O(1) time independently of number or size of the blocks.

For the useful pattern on how to use fixed memory pool together with \mbox{\hyperlink{tn__dqueue_8h}{queue}}, refer to the example\+: {\ttfamily examples/queue}. Be sure to examine the readme there. \doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}}
\begin{DoxyCompactList}\small\item\em Fixed memory blocks pool. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structTN__FMemTaskWait}{T\+N\+\_\+\+F\+Mem\+Task\+Wait}}
\begin{DoxyCompactList}\small\item\em F\+Mem-\/specific fields related to waiting task, to be included in struct \mbox{\hyperlink{structTN__Task}{T\+N\+\_\+\+Task}}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{tn__fmem_8h_ab45e9c2ad4a64345214f9a912bf76fc3}{T\+N\+\_\+\+F\+M\+E\+M\+\_\+\+B\+U\+F\+\_\+\+D\+EF}}(name,  item\+\_\+type,  size)
\begin{DoxyCompactList}\small\item\em Convenience macro for the definition of buffer for memory pool. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876}{T\+N\+\_\+\+R\+Code}} \mbox{\hyperlink{tn__fmem_8h_a56d47d4a1b6453d959336448a0ce96ac}{tn\+\_\+fmem\+\_\+create}} (struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$fmem, void $\ast$start\+\_\+addr, unsigned int block\+\_\+size, int blocks\+\_\+cnt)
\begin{DoxyCompactList}\small\item\em Construct fixed memory blocks pool. \end{DoxyCompactList}\item 
enum \mbox{\hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876}{T\+N\+\_\+\+R\+Code}} \mbox{\hyperlink{tn__fmem_8h_ac9b8243577c7a14ce442879e9e68d98c}{tn\+\_\+fmem\+\_\+delete}} (struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$fmem)
\begin{DoxyCompactList}\small\item\em Destruct fixed memory blocks pool. \end{DoxyCompactList}\item 
enum \mbox{\hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876}{T\+N\+\_\+\+R\+Code}} \mbox{\hyperlink{tn__fmem_8h_a2ecd094041dbd0e92d61b852b7952444}{tn\+\_\+fmem\+\_\+get}} (struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$fmem, void $\ast$$\ast$p\+\_\+data, \mbox{\hyperlink{tn__common_8h_ac885b63d00c063de61cdbd80bf26d8aa}{T\+N\+\_\+\+Tick\+Cnt}} timeout)
\begin{DoxyCompactList}\small\item\em Get memory block from the pool. \end{DoxyCompactList}\item 
enum \mbox{\hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876}{T\+N\+\_\+\+R\+Code}} \mbox{\hyperlink{tn__fmem_8h_affea42ad41734fadfe8170b4234ca567}{tn\+\_\+fmem\+\_\+get\+\_\+polling}} (struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$fmem, void $\ast$$\ast$p\+\_\+data)
\begin{DoxyCompactList}\small\item\em The same as {\ttfamily \mbox{\hyperlink{tn__fmem_8h_a2ecd094041dbd0e92d61b852b7952444}{tn\+\_\+fmem\+\_\+get()}}} with zero timeout. \end{DoxyCompactList}\item 
enum \mbox{\hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876}{T\+N\+\_\+\+R\+Code}} \mbox{\hyperlink{tn__fmem_8h_a24ef67ab8567f6dd4d08946711f756df}{tn\+\_\+fmem\+\_\+iget\+\_\+polling}} (struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$fmem, void $\ast$$\ast$p\+\_\+data)
\begin{DoxyCompactList}\small\item\em The same as {\ttfamily \mbox{\hyperlink{tn__fmem_8h_a2ecd094041dbd0e92d61b852b7952444}{tn\+\_\+fmem\+\_\+get()}}} with zero timeout, but for using in the I\+SR. \end{DoxyCompactList}\item 
enum \mbox{\hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876}{T\+N\+\_\+\+R\+Code}} \mbox{\hyperlink{tn__fmem_8h_adc5dfb589f4ef2347021c727cd4cc030}{tn\+\_\+fmem\+\_\+release}} (struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$fmem, void $\ast$p\+\_\+data)
\begin{DoxyCompactList}\small\item\em Release memory block back to the pool. \end{DoxyCompactList}\item 
enum \mbox{\hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876}{T\+N\+\_\+\+R\+Code}} \mbox{\hyperlink{tn__fmem_8h_a061edcb30a486dba289aa136af7b68f6}{tn\+\_\+fmem\+\_\+irelease}} (struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$fmem, void $\ast$p\+\_\+data)
\begin{DoxyCompactList}\small\item\em The same as {\ttfamily \mbox{\hyperlink{tn__fmem_8h_a2ecd094041dbd0e92d61b852b7952444}{tn\+\_\+fmem\+\_\+get()}}}, but for using in the I\+SR. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{tn__fmem_8h_ae8b80e0a0a8b07e11acbc4f15f3ef32d}{tn\+\_\+fmem\+\_\+free\+\_\+blocks\+\_\+cnt\+\_\+get}} (struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$fmem)
\begin{DoxyCompactList}\small\item\em Returns number of free blocks in the memory pool. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{tn__fmem_8h_a2f23f2cdb3e6f3f2a1c1f9ebc4e6e8cb}{tn\+\_\+fmem\+\_\+used\+\_\+blocks\+\_\+cnt\+\_\+get}} (struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$fmem)
\begin{DoxyCompactList}\small\item\em Returns number of used (non-\/free) blocks in the memory pool. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{tn__fmem_8h_ab45e9c2ad4a64345214f9a912bf76fc3}\label{tn__fmem_8h_ab45e9c2ad4a64345214f9a912bf76fc3}} 
\index{tn\_fmem.h@{tn\_fmem.h}!TN\_FMEM\_BUF\_DEF@{TN\_FMEM\_BUF\_DEF}}
\index{TN\_FMEM\_BUF\_DEF@{TN\_FMEM\_BUF\_DEF}!tn\_fmem.h@{tn\_fmem.h}}
\doxysubsubsection{\texorpdfstring{TN\_FMEM\_BUF\_DEF}{TN\_FMEM\_BUF\_DEF}}
{\footnotesize\ttfamily \#define T\+N\+\_\+\+F\+M\+E\+M\+\_\+\+B\+U\+F\+\_\+\+D\+EF(\begin{DoxyParamCaption}\item[{}]{name,  }\item[{}]{item\+\_\+type,  }\item[{}]{size }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{   \mbox{\hyperlink{tn__arch__example_8h_ab80cba0fe9ffcd9011d53dfeb9e39bf4}{TN\_UWord}} name[                                                 \(\backslash\)}
\DoxyCodeLine{        (size)                                                    \(\backslash\)}
\DoxyCodeLine{      * (\mbox{\hyperlink{tn__common_8h_a3f48380e8a624edc643319a81192d88e}{TN\_MAKE\_ALIG\_SIZE}}(\textcolor{keyword}{sizeof}(item\_type)) / \textcolor{keyword}{sizeof}(\mbox{\hyperlink{tn__arch__example_8h_ab80cba0fe9ffcd9011d53dfeb9e39bf4}{TN\_UWord}})) \(\backslash\)}
\DoxyCodeLine{      ]}

\end{DoxyCode}


Convenience macro for the definition of buffer for memory pool. 

See {\ttfamily \mbox{\hyperlink{tn__fmem_8h_a56d47d4a1b6453d959336448a0ce96ac}{tn\+\_\+fmem\+\_\+create()}}} for usage example.


\begin{DoxyParams}{Parameters}
{\em name} & C variable name of the buffer array (this name should be given to the {\ttfamily \mbox{\hyperlink{tn__fmem_8h_a56d47d4a1b6453d959336448a0ce96ac}{tn\+\_\+fmem\+\_\+create()}}} function as the {\ttfamily start\+\_\+addr} argument) \\
\hline
{\em item\+\_\+type} & Type of item in the memory pool, like {\ttfamily struct My\+Memory\+Item}. \\
\hline
{\em size} & Number of items in the memory pool. \\
\hline
\end{DoxyParams}


Definition at line 146 of file tn\+\_\+fmem.\+h.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{tn__fmem_8h_a56d47d4a1b6453d959336448a0ce96ac}\label{tn__fmem_8h_a56d47d4a1b6453d959336448a0ce96ac}} 
\index{tn\_fmem.h@{tn\_fmem.h}!tn\_fmem\_create@{tn\_fmem\_create}}
\index{tn\_fmem\_create@{tn\_fmem\_create}!tn\_fmem.h@{tn\_fmem.h}}
\doxysubsubsection{\texorpdfstring{tn\_fmem\_create()}{tn\_fmem\_create()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876}{T\+N\+\_\+\+R\+Code}} tn\+\_\+fmem\+\_\+create (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$}]{fmem,  }\item[{void $\ast$}]{start\+\_\+addr,  }\item[{unsigned int}]{block\+\_\+size,  }\item[{int}]{blocks\+\_\+cnt }\end{DoxyParamCaption})}



Construct fixed memory blocks pool. 

{\ttfamily id\+\_\+fmp} field should not contain {\ttfamily \#T\+N\+\_\+\+I\+D\+\_\+\+F\+S\+M\+E\+M\+O\+R\+Y\+P\+O\+OL}, otherwise, {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+W\+P\+A\+R\+AM} is returned.

Note that {\ttfamily start\+\_\+addr} and {\ttfamily block\+\_\+size} should be a multiple of {\ttfamily sizeof(\#T\+N\+\_\+\+U\+Word)}.

For the definition of buffer, convenience macro {\ttfamily \mbox{\hyperlink{tn__fmem_8h_ab45e9c2ad4a64345214f9a912bf76fc3}{T\+N\+\_\+\+F\+M\+E\+M\+\_\+\+B\+U\+F\+\_\+\+D\+E\+F()}}} was invented.

Typical definition looks as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//-\/-\/ number of blocks in the pool}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define MY\_MEMORY\_BUF\_SIZE    8}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//-\/-\/ type for memory block}}
\DoxyCodeLine{\textcolor{keyword}{struct }MyMemoryItem \{}
\DoxyCodeLine{   \textcolor{comment}{// ... arbitrary fields ...}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//-\/-\/ define buffer for memory pool}}
\DoxyCodeLine{\mbox{\hyperlink{tn__fmem_8h_ab45e9c2ad4a64345214f9a912bf76fc3}{TN\_FMEM\_BUF\_DEF}}(my\_fmem\_buf, \textcolor{keyword}{struct} MyMemoryItem, MY\_MEMORY\_BUF\_SIZE);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//-\/-\/ define memory pool structure}}
\DoxyCodeLine{\textcolor{keyword}{struct }\mbox{\hyperlink{structTN__FMem}{TN\_FMem}} my\_fmem;}
\end{DoxyCode}


And then, construct your {\ttfamily my\+\_\+fmem} as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{enum} \mbox{\hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876}{TN\_RCode}} rc;}
\DoxyCodeLine{rc = \mbox{\hyperlink{tn__fmem_8h_a56d47d4a1b6453d959336448a0ce96ac}{tn\_fmem\_create}}( \&my\_fmem,}
\DoxyCodeLine{                     my\_fmem\_buf,}
\DoxyCodeLine{                     \mbox{\hyperlink{tn__common_8h_a3f48380e8a624edc643319a81192d88e}{TN\_MAKE\_ALIG\_SIZE}}(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} MyMemoryItem)),}
\DoxyCodeLine{                     MY\_MEMORY\_BUF\_SIZE );}
\DoxyCodeLine{\textcolor{keywordflow}{if} (rc != \mbox{\hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876afb291924237186f5765865256c75e639}{TN\_RC\_OK}})\{}
\DoxyCodeLine{   \textcolor{comment}{//-\/-\/ handle error}}
\DoxyCodeLine{\}}
\end{DoxyCode}


If given {\ttfamily start\+\_\+addr} and/or {\ttfamily block\+\_\+size} aren\textquotesingle{}t aligned properly, {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+W\+P\+A\+R\+AM} is returned.

  \includegraphics{attr_call_task.png}    \includegraphics{attr_call_int.png}  
\footnotesize {\itshape (refer to \mbox{\hyperlink{legend}{Legend}} for details)}
\normalsize 


\begin{DoxyParams}{Parameters}
{\em fmem} & pointer to already allocated {\ttfamily struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}}}. \\
\hline
{\em start\+\_\+addr} & pointer to start of the array; should be aligned properly, see example above \\
\hline
{\em block\+\_\+size} & size of memory block; should be a multiple of {\ttfamily sizeof(\#T\+N\+\_\+\+U\+Word)}, see example above \\
\hline
{\em blocks\+\_\+cnt} & capacity (total number of blocks in the memory pool)\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+OK} if memory pool was successfully created;
\item If {\ttfamily \#T\+N\+\_\+\+C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+AM} is non-\/zero, additional return code is available\+: {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+W\+P\+A\+R\+AM}.
\end{DoxyItemize}
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{tn__common_8h_a3f48380e8a624edc643319a81192d88e}{T\+N\+\_\+\+M\+A\+K\+E\+\_\+\+A\+L\+I\+G\+\_\+\+S\+I\+ZE}} 
\end{DoxySeeAlso}
\mbox{\Hypertarget{tn__fmem_8h_ac9b8243577c7a14ce442879e9e68d98c}\label{tn__fmem_8h_ac9b8243577c7a14ce442879e9e68d98c}} 
\index{tn\_fmem.h@{tn\_fmem.h}!tn\_fmem\_delete@{tn\_fmem\_delete}}
\index{tn\_fmem\_delete@{tn\_fmem\_delete}!tn\_fmem.h@{tn\_fmem.h}}
\doxysubsubsection{\texorpdfstring{tn\_fmem\_delete()}{tn\_fmem\_delete()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876}{T\+N\+\_\+\+R\+Code}} tn\+\_\+fmem\+\_\+delete (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$}]{fmem }\end{DoxyParamCaption})}



Destruct fixed memory blocks pool. 

All tasks that wait for free memory block become runnable with {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+D\+E\+L\+E\+T\+ED} code returned.

  \includegraphics{attr_call_task.png}    \includegraphics{attr_call_ct_sw.png}  
\footnotesize {\itshape (refer to \mbox{\hyperlink{legend}{Legend}} for details)}
\normalsize 


\begin{DoxyParams}{Parameters}
{\em fmem} & pointer to memory pool to be deleted\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+OK} if memory pool is successfully deleted;
\item {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+W\+C\+O\+N\+T\+E\+XT} if called from wrong context;
\item If {\ttfamily \#T\+N\+\_\+\+C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+AM} is non-\/zero, additional return codes are available\+: {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+W\+P\+A\+R\+AM} and {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+O\+BJ}. 
\end{DoxyItemize}
\end{DoxyReturn}
\mbox{\Hypertarget{tn__fmem_8h_a2ecd094041dbd0e92d61b852b7952444}\label{tn__fmem_8h_a2ecd094041dbd0e92d61b852b7952444}} 
\index{tn\_fmem.h@{tn\_fmem.h}!tn\_fmem\_get@{tn\_fmem\_get}}
\index{tn\_fmem\_get@{tn\_fmem\_get}!tn\_fmem.h@{tn\_fmem.h}}
\doxysubsubsection{\texorpdfstring{tn\_fmem\_get()}{tn\_fmem\_get()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876}{T\+N\+\_\+\+R\+Code}} tn\+\_\+fmem\+\_\+get (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$}]{fmem,  }\item[{void $\ast$$\ast$}]{p\+\_\+data,  }\item[{\mbox{\hyperlink{tn__common_8h_ac885b63d00c063de61cdbd80bf26d8aa}{T\+N\+\_\+\+Tick\+Cnt}}}]{timeout }\end{DoxyParamCaption})}



Get memory block from the pool. 

Start address of the memory block is returned through the {\ttfamily p\+\_\+data} argument. The content of memory block is undefined. If there is no free block in the pool, behavior depends on {\ttfamily timeout} value\+: refer to {\ttfamily \#T\+N\+\_\+\+Tick\+Cnt}.

  \includegraphics{attr_call_task.png}    \includegraphics{attr_call_ct_sw.png}    \includegraphics{attr_timeout.png}  
\footnotesize {\itshape (refer to \mbox{\hyperlink{legend}{Legend}} for details)}
\normalsize 


\begin{DoxyParams}{Parameters}
{\em fmem} & Pointer to memory pool \\
\hline
{\em p\+\_\+data} & Address of the {\ttfamily (void $\ast$)} to which received block address will be saved \\
\hline
{\em timeout} & ~\newline
 Refer to {\ttfamily \#T\+N\+\_\+\+Tick\+Cnt}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+OK} if block was successfully returned through {\ttfamily p\+\_\+data};
\item {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+W\+C\+O\+N\+T\+E\+XT} if called from wrong context;
\item Other possible return codes depend on {\ttfamily timeout} value, refer to {\ttfamily \#T\+N\+\_\+\+Tick\+Cnt}
\item If {\ttfamily \#T\+N\+\_\+\+C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+AM} is non-\/zero, additional return codes are available\+: {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+W\+P\+A\+R\+AM} and {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+O\+BJ}. 
\end{DoxyItemize}
\end{DoxyReturn}
\mbox{\Hypertarget{tn__fmem_8h_affea42ad41734fadfe8170b4234ca567}\label{tn__fmem_8h_affea42ad41734fadfe8170b4234ca567}} 
\index{tn\_fmem.h@{tn\_fmem.h}!tn\_fmem\_get\_polling@{tn\_fmem\_get\_polling}}
\index{tn\_fmem\_get\_polling@{tn\_fmem\_get\_polling}!tn\_fmem.h@{tn\_fmem.h}}
\doxysubsubsection{\texorpdfstring{tn\_fmem\_get\_polling()}{tn\_fmem\_get\_polling()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876}{T\+N\+\_\+\+R\+Code}} tn\+\_\+fmem\+\_\+get\+\_\+polling (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$}]{fmem,  }\item[{void $\ast$$\ast$}]{p\+\_\+data }\end{DoxyParamCaption})}



The same as {\ttfamily \mbox{\hyperlink{tn__fmem_8h_a2ecd094041dbd0e92d61b852b7952444}{tn\+\_\+fmem\+\_\+get()}}} with zero timeout. 

  \includegraphics{attr_call_task.png}    \includegraphics{attr_call_ct_sw.png}  
\footnotesize {\itshape (refer to \mbox{\hyperlink{legend}{Legend}} for details)}
\normalsize  \mbox{\Hypertarget{tn__fmem_8h_a24ef67ab8567f6dd4d08946711f756df}\label{tn__fmem_8h_a24ef67ab8567f6dd4d08946711f756df}} 
\index{tn\_fmem.h@{tn\_fmem.h}!tn\_fmem\_iget\_polling@{tn\_fmem\_iget\_polling}}
\index{tn\_fmem\_iget\_polling@{tn\_fmem\_iget\_polling}!tn\_fmem.h@{tn\_fmem.h}}
\doxysubsubsection{\texorpdfstring{tn\_fmem\_iget\_polling()}{tn\_fmem\_iget\_polling()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876}{T\+N\+\_\+\+R\+Code}} tn\+\_\+fmem\+\_\+iget\+\_\+polling (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$}]{fmem,  }\item[{void $\ast$$\ast$}]{p\+\_\+data }\end{DoxyParamCaption})}



The same as {\ttfamily \mbox{\hyperlink{tn__fmem_8h_a2ecd094041dbd0e92d61b852b7952444}{tn\+\_\+fmem\+\_\+get()}}} with zero timeout, but for using in the I\+SR. 

  \includegraphics{attr_call_int.png}    \includegraphics{attr_call_ct_sw.png}  
\footnotesize {\itshape (refer to \mbox{\hyperlink{legend}{Legend}} for details)}
\normalsize  \mbox{\Hypertarget{tn__fmem_8h_adc5dfb589f4ef2347021c727cd4cc030}\label{tn__fmem_8h_adc5dfb589f4ef2347021c727cd4cc030}} 
\index{tn\_fmem.h@{tn\_fmem.h}!tn\_fmem\_release@{tn\_fmem\_release}}
\index{tn\_fmem\_release@{tn\_fmem\_release}!tn\_fmem.h@{tn\_fmem.h}}
\doxysubsubsection{\texorpdfstring{tn\_fmem\_release()}{tn\_fmem\_release()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876}{T\+N\+\_\+\+R\+Code}} tn\+\_\+fmem\+\_\+release (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$}]{fmem,  }\item[{void $\ast$}]{p\+\_\+data }\end{DoxyParamCaption})}



Release memory block back to the pool. 

The kernel does not check the validity of the membership of given block in the memory pool. If all the memory blocks in the pool are free already, {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+O\+V\+E\+R\+F\+L\+OW} is returned.

  \includegraphics{attr_call_task.png}    \includegraphics{attr_call_ct_sw.png}  
\footnotesize {\itshape (refer to \mbox{\hyperlink{legend}{Legend}} for details)}
\normalsize 


\begin{DoxyParams}{Parameters}
{\em fmem} & Pointer to memory pool. \\
\hline
{\em p\+\_\+data} & Address of the memory block to release.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+OK} on success
\item {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+W\+C\+O\+N\+T\+E\+XT} if called from wrong context;
\item If {\ttfamily \#T\+N\+\_\+\+C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+AM} is non-\/zero, additional return codes are available\+: {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+W\+P\+A\+R\+AM} and {\ttfamily \#T\+N\+\_\+\+R\+C\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+O\+BJ}. 
\end{DoxyItemize}
\end{DoxyReturn}
\mbox{\Hypertarget{tn__fmem_8h_a061edcb30a486dba289aa136af7b68f6}\label{tn__fmem_8h_a061edcb30a486dba289aa136af7b68f6}} 
\index{tn\_fmem.h@{tn\_fmem.h}!tn\_fmem\_irelease@{tn\_fmem\_irelease}}
\index{tn\_fmem\_irelease@{tn\_fmem\_irelease}!tn\_fmem.h@{tn\_fmem.h}}
\doxysubsubsection{\texorpdfstring{tn\_fmem\_irelease()}{tn\_fmem\_irelease()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{tn__common_8h_aa43bd3da1ad4c1e61224b5f23b369876}{T\+N\+\_\+\+R\+Code}} tn\+\_\+fmem\+\_\+irelease (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$}]{fmem,  }\item[{void $\ast$}]{p\+\_\+data }\end{DoxyParamCaption})}



The same as {\ttfamily \mbox{\hyperlink{tn__fmem_8h_a2ecd094041dbd0e92d61b852b7952444}{tn\+\_\+fmem\+\_\+get()}}}, but for using in the I\+SR. 

  \includegraphics{attr_call_int.png}    \includegraphics{attr_call_ct_sw.png}  
\footnotesize {\itshape (refer to \mbox{\hyperlink{legend}{Legend}} for details)}
\normalsize  \mbox{\Hypertarget{tn__fmem_8h_ae8b80e0a0a8b07e11acbc4f15f3ef32d}\label{tn__fmem_8h_ae8b80e0a0a8b07e11acbc4f15f3ef32d}} 
\index{tn\_fmem.h@{tn\_fmem.h}!tn\_fmem\_free\_blocks\_cnt\_get@{tn\_fmem\_free\_blocks\_cnt\_get}}
\index{tn\_fmem\_free\_blocks\_cnt\_get@{tn\_fmem\_free\_blocks\_cnt\_get}!tn\_fmem.h@{tn\_fmem.h}}
\doxysubsubsection{\texorpdfstring{tn\_fmem\_free\_blocks\_cnt\_get()}{tn\_fmem\_free\_blocks\_cnt\_get()}}
{\footnotesize\ttfamily int tn\+\_\+fmem\+\_\+free\+\_\+blocks\+\_\+cnt\+\_\+get (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$}]{fmem }\end{DoxyParamCaption})}



Returns number of free blocks in the memory pool. 

  \includegraphics{attr_call_task.png}    \includegraphics{attr_call_int.png}  
\footnotesize {\itshape (refer to \mbox{\hyperlink{legend}{Legend}} for details)}
\normalsize 


\begin{DoxyParams}{Parameters}
{\em fmem} & Pointer to memory pool.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of free blocks in the memory pool, or -\/1 if wrong params were given (the check is performed if only {\ttfamily \#T\+N\+\_\+\+C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+AM} is non-\/zero) 
\end{DoxyReturn}
\mbox{\Hypertarget{tn__fmem_8h_a2f23f2cdb3e6f3f2a1c1f9ebc4e6e8cb}\label{tn__fmem_8h_a2f23f2cdb3e6f3f2a1c1f9ebc4e6e8cb}} 
\index{tn\_fmem.h@{tn\_fmem.h}!tn\_fmem\_used\_blocks\_cnt\_get@{tn\_fmem\_used\_blocks\_cnt\_get}}
\index{tn\_fmem\_used\_blocks\_cnt\_get@{tn\_fmem\_used\_blocks\_cnt\_get}!tn\_fmem.h@{tn\_fmem.h}}
\doxysubsubsection{\texorpdfstring{tn\_fmem\_used\_blocks\_cnt\_get()}{tn\_fmem\_used\_blocks\_cnt\_get()}}
{\footnotesize\ttfamily int tn\+\_\+fmem\+\_\+used\+\_\+blocks\+\_\+cnt\+\_\+get (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structTN__FMem}{T\+N\+\_\+\+F\+Mem}} $\ast$}]{fmem }\end{DoxyParamCaption})}



Returns number of used (non-\/free) blocks in the memory pool. 

  \includegraphics{attr_call_task.png}    \includegraphics{attr_call_int.png}  
\footnotesize {\itshape (refer to \mbox{\hyperlink{legend}{Legend}} for details)}
\normalsize 


\begin{DoxyParams}{Parameters}
{\em fmem} & Pointer to memory pool.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of used (non-\/free) blocks in the memory pool, or -\/1 if wrong params were given (the check is performed if only {\ttfamily \#T\+N\+\_\+\+C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+AM} is non-\/zero) 
\end{DoxyReturn}
